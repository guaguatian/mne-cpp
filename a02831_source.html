<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>MNE-CPP Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a class="site-logo" href="http://www.mne-cpp.org/" title="A Framework for Electrophysiology"><img alt="Logo" src="MNE-CPP_Doxygen_Logo.svg"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MNE-CPP
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A Framework for Electrophysiology</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a6e4fee11f07c3b70486e88fe92cbbdc.html">applications</a></li><li class="navelem"><a class="el" href="dir_e446c6e1cb3fc1a93d99e5b33bb756bc.html">mne_scan</a></li><li class="navelem"><a class="el" href="dir_dff0cf57900fd280f21b02b063bc8d88.html">plugins</a></li><li class="navelem"><a class="el" href="dir_adcbb05398b0ea4d39fe16c2ba78c6ae.html">noise</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">noiseestimate.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a02831.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment"></span><span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">// INCLUDES</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02834.html">noiseestimate.h</a>&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02828.html">FormFiles/noiseestimatesetupwidget.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// QT INCLUDES</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;QtCore/QtPlugin&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;QDebug&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">// USED NAMESPACES</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03225.html">NOISEESTIMATEPLUGIN</a>;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03205.html">SCSHAREDLIB</a>;</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03204.html">SCMEASLIB</a>;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="comment">// DEFINE MEMBER METHODS</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="a05763.html#ae11f5dd22c45ee1072c30cfb6977b49c">   68</a></span>&#160;<a class="code" href="a05763.html#ae11f5dd22c45ee1072c30cfb6977b49c">NoiseEstimate::NoiseEstimate</a>()</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;: m_bIsRunning(false)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;, m_bProcessData(false)</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;, m_pRTMSAInput(NULL)</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;, m_pFSOutput(NULL)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;, m_pBuffer(<a class="code" href="a04783.html">CircularMatrixBuffer</a>&lt;double&gt;::<a class="code" href="a05343.html#aa4d25750a6f70919b331b82be5728a3a">SPtr</a>())</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;, m_Fs(600)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;, m_iFFTlength(16384)</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;, m_DataLen(6)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;, m_x_scale_type(0)</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;{</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;}</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;</div><div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="a05763.html#a7c6087315289dfb11f3a54fb0be47ec8">   84</a></span>&#160;<a class="code" href="a05763.html#a7c6087315289dfb11f3a54fb0be47ec8">NoiseEstimate::~NoiseEstimate</a>()</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="keywordflow">if</span>(this-&gt;isRunning())</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;        <a class="code" href="a05763.html#a93720fc35956198b08703d8e07a50186">stop</a>();</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;}</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="a05763.html#a510d81a926a84a35d2dfcbfcd2421bd1">   93</a></span>&#160;QSharedPointer&lt;IPlugin&gt; <a class="code" href="a05763.html#a510d81a926a84a35d2dfcbfcd2421bd1">NoiseEstimate::clone</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    QSharedPointer&lt;NoiseEstimate&gt; pNoiseEstimateClone(<span class="keyword">new</span> <a class="code" href="a05763.html">NoiseEstimate</a>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <span class="keywordflow">return</span> pNoiseEstimateClone;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;}</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">// Creating required display instances and set configurations</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div><div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="a05763.html#a75d9893c4d5bcfa1c67a0c25b6d6abda">  105</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05763.html#a75d9893c4d5bcfa1c67a0c25b6d6abda">NoiseEstimate::init</a>()</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{    </div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <span class="comment">// Load Settings</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    QSettings settings;</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    m_iFFTlength = settings.value(QString(<span class="stringliteral">&quot;Plugin/%1/FFTLength&quot;</span>).arg(this-&gt;<a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">getName</a>()), 16384).toInt();</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    m_DataLen = settings.value(QString(<span class="stringliteral">&quot;Plugin/%1/DataLen&quot;</span>).arg(this-&gt;<a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">getName</a>()), 6).toInt();</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    m_x_scale_type = settings.value(QString(<span class="stringliteral">&quot;Plugin/%1/ScaleType&quot;</span>).arg(this-&gt;<a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">getName</a>()), 0).toInt();</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <span class="comment">// Input</span></div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    m_pRTMSAInput = <a class="code" href="a05379.html#ac8fc3f9ee35cd2c8336cadb3e7c6f5df">PluginInputData&lt;RealTimeMultiSampleArray&gt;::create</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;Noise Estimatge In&quot;</span>, <span class="stringliteral">&quot;Noise Estimate input data&quot;</span>);</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    connect(m_pRTMSAInput.data(), &amp;PluginInputConnector::notify, <span class="keyword">this</span>, &amp;NoiseEstimate::update, Qt::DirectConnection);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="a05351.html#a469449e76829b8395ca018db00d78c04">m_inputConnectors</a>.append(m_pRTMSAInput);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <span class="comment">// Output</span></div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    m_pFSOutput = <a class="code" href="a05391.html#a8223ab9c31dbedbff2f257c2efd8c67b">PluginOutputData&lt;RealTimeSpectrum&gt;::create</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;Noise Estimate Out&quot;</span>, <span class="stringliteral">&quot;Noise Estimate output data&quot;</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    m_pFSOutput-&gt;data()-&gt;setName(this-&gt;<a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">getName</a>());<span class="comment">//Provide name to auto store widget settings</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="a05351.html#a3d20989cd2175fa71bf77ceb0c99f353">m_outputConnectors</a>.append(m_pFSOutput);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">//init channels when fiff info is available</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    connect(<span class="keyword">this</span>, &amp;<a class="code" href="a05763.html#ad584193146d56f190bdbd273955bd412">NoiseEstimate::fiffInfoAvailable</a>, <span class="keyword">this</span>, &amp;NoiseEstimate::initConnector);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <span class="comment">//Delete Buffer - will be initailzed with first incoming data</span></div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordflow">if</span>(!m_pBuffer.isNull())</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        m_pBuffer = <a class="code" href="a04783.html">CircularMatrixBuffer&lt;double&gt;::SPtr</a>();</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="a05763.html#ada6933db71cbc8f9569d7bdf873bbfba">  137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05763.html#ada6933db71cbc8f9569d7bdf873bbfba">NoiseEstimate::unload</a>()</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// Store Settings</span></div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    QSettings settings;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    settings.setValue(QString(<span class="stringliteral">&quot;Plugin/%1/FFTLength&quot;</span>).arg(this-&gt;<a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">getName</a>()), m_iFFTlength);</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    settings.setValue(QString(<span class="stringliteral">&quot;Plugin/%1/DataLen&quot;</span>).arg(this-&gt;<a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">getName</a>()), m_DataLen);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    settings.setValue(QString(<span class="stringliteral">&quot;Plugin/%1/ScaleType&quot;</span>).arg(this-&gt;<a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">getName</a>()), m_x_scale_type);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;}</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="keywordtype">void</span> NoiseEstimate::initConnector()</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;{</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">/* init Connector is called after NoiseEstimate::start */</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;void NoiseEstimate::initConnector()&quot;</span>;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span>(m_pFiffInfo){</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <span class="comment">// pass fiff info</span></div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        m_pFSOutput-&gt;data()-&gt;initFromFiffInfo(m_pFiffInfo);</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="a05763.html#a271d43f47a39254f7d2fe145ae76e426">  165</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05763.html#a271d43f47a39254f7d2fe145ae76e426">NoiseEstimate::start</a>()</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">//    //Check if the thread is already or still running. This can happen if the start button is pressed immediately after the stop button was pressed. In this case the stopping process is not finished yet but the start process is initiated.</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">//    if(this-&gt;isRunning())</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="comment">//        QThread::wait();</span></div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    m_bIsRunning = <span class="keyword">true</span>;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// Start threads</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    QThread::start();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;NoiseEstimate Thread is started.&quot;</span>;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno"><a class="line" href="a05763.html#a93720fc35956198b08703d8e07a50186">  184</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05763.html#a93720fc35956198b08703d8e07a50186">NoiseEstimate::stop</a>()</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    <span class="comment">//Wait until this thread is stopped</span></div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    m_bIsRunning = <span class="keyword">false</span>;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span>(m_bProcessData)</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    {</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;        <span class="comment">//In case the semaphore blocks the thread -&gt; Release the QSemaphore and let it exit from the pop function (acquire statement)</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        m_pBuffer-&gt;<a class="code" href="a04783.html#a47b3787b6eee3c1e8160821d5e3ad054">releaseFromPop</a>();</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        m_pBuffer-&gt;<a class="code" href="a04783.html#a458d4ab449c1acd59e8e31b268915826">releaseFromPush</a>();</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">//        m_pBuffer-&gt;clear();</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">//        m_pNEOutput-&gt;data()-&gt;clear();</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// Stop filling buffers with data from the inputs</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    m_bProcessData = <span class="keyword">false</span>;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;NoiseEstimate Thread is stopped.&quot;</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;<span class="comment">//    if(m_pRtNoise &amp;&amp; m_pRtNoise-&gt;isRunning())</span></div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;<span class="comment">//        m_pRtNoise-&gt;stop();</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;}</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div><div class="line"><a name="l00217"></a><span class="lineno"><a class="line" href="a05763.html#ad8d68d2e5aab57ef68e9dfac5795270e">  217</a></span>&#160;<a class="code" href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5d">IPlugin::PluginType</a> <a class="code" href="a05763.html#ad8d68d2e5aab57ef68e9dfac5795270e">NoiseEstimate::getType</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5da1dcae522385b31a0bb1d950224b3de2f">_IAlgorithm</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;}</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno"><a class="line" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">  225</a></span>&#160;QString <a class="code" href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">NoiseEstimate::getName</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;Spectrum&quot;</span>;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;}</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno"><a class="line" href="a05763.html#a1ac7012c939f59d5f55564a23f66f58b">  233</a></span>&#160;QWidget* <a class="code" href="a05763.html#a1ac7012c939f59d5f55564a23f66f58b">NoiseEstimate::setupWidget</a>()</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;{</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="a05759.html">NoiseEstimateSetupWidget</a>* <a class="code" href="a05763.html#a1ac7012c939f59d5f55564a23f66f58b">setupWidget</a> = <span class="keyword">new</span> <a class="code" href="a05759.html">NoiseEstimateSetupWidget</a>(<span class="keyword">this</span>);<span class="comment">//widget is later distroyed by CentralWidget - so it has to be created everytime new</span></div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    connect(<span class="keyword">this</span>,&amp;<a class="code" href="a05763.html#a4e10e5a2574b1b8d0878221db149d807">NoiseEstimate::SetNoisePara</a>,setupWidget,&amp;NoiseEstimateSetupWidget::init);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a05763.html#a1ac7012c939f59d5f55564a23f66f58b">setupWidget</a>;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;}</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="keywordtype">void</span> NoiseEstimate::update(<a class="code" href="a05299.html#ab0a022ec36c13e2f29d09aa4e08dc85d">SCMEASLIB::Measurement::SPtr</a> pMeasurement)</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;{</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    QSharedPointer&lt;RealTimeMultiSampleArray&gt; pRTMSA = pMeasurement.dynamicCast&lt;<a class="code" href="a05323.html">RealTimeMultiSampleArray</a>&gt;();</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;    <span class="keywordflow">if</span>(pRTMSA)</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        <span class="comment">//Check if buffer initialized</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        m_qMutex.lock();</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <span class="keywordflow">if</span>(!m_pBuffer)</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        {</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            m_pBuffer = <a class="code" href="a04783.html#a8cf538a5e32c7a7173a7e78229d297aa">CircularMatrixBuffer&lt;double&gt;::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a04783.html">CircularMatrixBuffer&lt;double&gt;</a>(8, pRTMSA-&gt;getNumChannels(), pRTMSA-&gt;getMultiSampleArray()[0].cols()));</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">//Fiff information</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;        <span class="keywordflow">if</span>(!m_pFiffInfo)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;            m_pFiffInfo = pRTMSA-&gt;info();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;            emit <a class="code" href="a05763.html#ad584193146d56f190bdbd273955bd412">fiffInfoAvailable</a>();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        m_qMutex.unlock();</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        <span class="keywordflow">if</span>(m_bProcessData)</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        {</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;            MatrixXd t_mat;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="keywordflow">for</span>(qint32 i = 0; i &lt; pRTMSA-&gt;getMultiArraySize(); ++i)</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            {</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                t_mat = pRTMSA-&gt;getMultiSampleArray()[i];</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                m_pBuffer-&gt;<a class="code" href="a04783.html#aa43706aa6110e3e799c58652d3af91be">push</a>(&amp;t_mat);</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;}</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="a05763.html#aaa55a63ad8f5bbab959495567ee64827">  283</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05763.html#aaa55a63ad8f5bbab959495567ee64827">NoiseEstimate::appendNoiseSpectrum</a>(MatrixXd t_send)</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;{ </div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;Spectrum&quot;</span>&lt;&lt;t_send(0,1)&lt;&lt;t_send(0,2)&lt;&lt;t_send(0,3);</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    m_qVecSpecData.push_back(t_send);</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;---------------------------------appendNoiseSpectrum--------------------------------&quot;</span>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;}</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;</div><div class="line"><a name="l00295"></a><span class="lineno"><a class="line" href="a05763.html#a287da7b885242b8e50e908604c0710cc">  295</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05763.html#a287da7b885242b8e50e908604c0710cc">NoiseEstimate::run</a>()</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;{</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// Read Fiff Info</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="keywordtype">bool</span> waitForFiffInfo = <span class="keyword">true</span>;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="keywordflow">while</span>(waitForFiffInfo)</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    {</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        m_qMutex.lock();</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        <span class="keywordflow">if</span>(m_pFiffInfo)</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;            waitForFiffInfo = <span class="keyword">false</span>;</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;        m_qMutex.unlock();</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        msleep(10);<span class="comment">// Wait for fiff Info</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">// Set up the x-axis scale type</span></div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    m_pFSOutput-&gt;data()-&gt;initScaleType(m_x_scale_type);</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    qDebug()&lt;&lt; <span class="stringliteral">&quot;Scale Type [0-normal; 1-log]:&quot;</span> &lt;&lt; m_x_scale_type;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;    <span class="comment">// Init Real-Time Noise Spectrum estimator</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// calculate the segments according to the requested data length</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="comment">// here 500 is the number of samples for a block specified in babyMEG plugin</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    m_Fs = m_pFiffInfo-&gt;sfreq;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordtype">int</span> segments =  (qint32) ((m_DataLen * m_pFiffInfo-&gt;sfreq)/m_pBuffer-&gt;<a class="code" href="a04783.html#a7d2b0b1f5eeec20bb39f14543fc9edad">cols</a>());</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;+++++++++++segments :&quot;</span>&lt;&lt;segments&lt;&lt; <span class="stringliteral">&quot;m_DataLen&quot;</span>&lt;&lt;m_DataLen&lt;&lt;<span class="stringliteral">&quot;m_Fs&quot;</span>&lt;&lt;m_Fs&lt;&lt;<span class="stringliteral">&quot;++++++++++++++++++++++++&quot;</span>;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    m_pRtNoise = <a class="code" href="a04743.html#ac1769b198acc9d3e84e92483431689c0">RtNoise::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a04743.html">RtNoise</a>(m_iFFTlength, m_pFiffInfo, segments));</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    connect(m_pRtNoise.data(), &amp;<a class="code" href="a04743.html#a8a0b3299cce7486fd0924e79e6703823">RtNoise::SpecCalculated</a>, <span class="keyword">this</span>, &amp;<a class="code" href="a05763.html#aaa55a63ad8f5bbab959495567ee64827">NoiseEstimate::appendNoiseSpectrum</a>);</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="comment">// Start Spectrum estimation</span></div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    m_pRtNoise-&gt;start();</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    m_bProcessData = <span class="keyword">true</span>;</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">while</span> (m_bIsRunning)</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    {</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        <span class="keywordflow">if</span>(m_bProcessData)</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        {</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;            <span class="comment">/* Dispatch the inputs */</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;            MatrixXd t_mat = m_pBuffer-&gt;<a class="code" href="a04783.html#aa8d868b14887588ea01039e7ea906e9f">pop</a>();</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;            <span class="comment">//ToDo: Implement your algorithm here</span></div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            m_pRtNoise-&gt;append(t_mat);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;           <span class="keywordflow">if</span>(m_qVecSpecData.size() &gt; 0)</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;           {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;               m_qMutex.lock();</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;               qDebug()&lt;&lt;<span class="stringliteral">&quot;%%%%%%%%%%%%%%%% send spectrum for display %%%%%%%%%%%%%%%%%%%&quot;</span>;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                <span class="comment">//send spectrum to the output data</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;               m_pFSOutput-&gt;data()-&gt;setValue(m_qVecSpecData[0]);</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;               m_qVecSpecData.pop_front();</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;               m_qMutex.unlock();</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;            }</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        }<span class="comment">//m_bProcessData</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }<span class="comment">//m_bIsRunning</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;noise estimation [Run] is done!&quot;</span>;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    m_pRtNoise-&gt;stop();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;<span class="comment">//    delete m_pRtNoise;</span></div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;}</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div><div class="ttc" id="a04743_html_ac1769b198acc9d3e84e92483431689c0"><div class="ttname"><a href="a04743.html#ac1769b198acc9d3e84e92483431689c0">RTPROCESSINGLIB::RtNoise::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; RtNoise &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a01502_source.html#l00113">rtnoise.h:113</a></div></div>
<div class="ttc" id="a05351_html_addfb10f54b9f7aaed5a12ad5665d8b5da1dcae522385b31a0bb1d950224b3de2f"><div class="ttname"><a href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5da1dcae522385b31a0bb1d950224b3de2f">SCSHAREDLIB::IPlugin::_IAlgorithm</a></div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00103">IPlugin.h:103</a></div></div>
<div class="ttc" id="a05763_html_a896a295fa5437e6cf26dd5a80bb360c6"><div class="ttname"><a href="a05763.html#a896a295fa5437e6cf26dd5a80bb360c6">NOISEESTIMATEPLUGIN::NoiseEstimate::getName</a></div><div class="ttdeci">virtual QString getName() const</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00225">noiseestimate.cpp:225</a></div></div>
<div class="ttc" id="a05763_html_ad584193146d56f190bdbd273955bd412"><div class="ttname"><a href="a05763.html#ad584193146d56f190bdbd273955bd412">NOISEESTIMATEPLUGIN::NoiseEstimate::fiffInfoAvailable</a></div><div class="ttdeci">void fiffInfoAvailable()</div></div>
<div class="ttc" id="a02828_html"><div class="ttname"><a href="a02828.html">noiseestimatesetupwidget.h</a></div><div class="ttdoc">Contains the declaration of the NoiseEstimateSetupWidget class. </div></div>
<div class="ttc" id="a05323_html"><div class="ttname"><a href="a05323.html">SCMEASLIB::RealTimeMultiSampleArray</a></div><div class="ttdoc">The RealTimeMultiSampleArrayNew class is the base class of every RealTimeMultiSampleArrayNew Measurem...</div><div class="ttdef"><b>Definition:</b> <a href="a02219_source.html#l00087">realtimemultisamplearray.h:87</a></div></div>
<div class="ttc" id="a04783_html_a458d4ab449c1acd59e8e31b268915826"><div class="ttname"><a href="a04783.html#a458d4ab449c1acd59e8e31b268915826">IOBUFFER::CircularMatrixBuffer::releaseFromPush</a></div><div class="ttdeci">bool releaseFromPush()</div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00372">circularmatrixbuffer.h:372</a></div></div>
<div class="ttc" id="a05351_html_a469449e76829b8395ca018db00d78c04"><div class="ttname"><a href="a05351.html#a469449e76829b8395ca018db00d78c04">SCSHAREDLIB::IPlugin::m_inputConnectors</a></div><div class="ttdeci">InputConnectorList m_inputConnectors</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00221">IPlugin.h:221</a></div></div>
<div class="ttc" id="a04783_html_aa43706aa6110e3e799c58652d3af91be"><div class="ttname"><a href="a04783.html#aa43706aa6110e3e799c58652d3af91be">IOBUFFER::CircularMatrixBuffer::push</a></div><div class="ttdeci">void push(const Matrix&lt; _Tp, Dynamic, Dynamic &gt; *pMatrix)</div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00243">circularmatrixbuffer.h:243</a></div></div>
<div class="ttc" id="a05763_html_ae11f5dd22c45ee1072c30cfb6977b49c"><div class="ttname"><a href="a05763.html#ae11f5dd22c45ee1072c30cfb6977b49c">NOISEESTIMATEPLUGIN::NoiseEstimate::NoiseEstimate</a></div><div class="ttdeci">NoiseEstimate()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00068">noiseestimate.cpp:68</a></div></div>
<div class="ttc" id="a04783_html_a8cf538a5e32c7a7173a7e78229d297aa"><div class="ttname"><a href="a04783.html#a8cf538a5e32c7a7173a7e78229d297aa">IOBUFFER::CircularMatrixBuffer::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; CircularMatrixBuffer &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00103">circularmatrixbuffer.h:103</a></div></div>
<div class="ttc" id="a04743_html_a8a0b3299cce7486fd0924e79e6703823"><div class="ttname"><a href="a04743.html#a8a0b3299cce7486fd0924e79e6703823">RTPROCESSINGLIB::RtNoise::SpecCalculated</a></div><div class="ttdeci">void SpecCalculated(Eigen::MatrixXd)</div></div>
<div class="ttc" id="a05763_html"><div class="ttname"><a href="a05763.html">NOISEESTIMATEPLUGIN::NoiseEstimate</a></div><div class="ttdoc">The NoiseEstimate class provides a NoiseEstimate algorithm structure. </div><div class="ttdef"><b>Definition:</b> <a href="a02834_source.html#l00114">noiseestimate.h:114</a></div></div>
<div class="ttc" id="a05763_html_a75d9893c4d5bcfa1c67a0c25b6d6abda"><div class="ttname"><a href="a05763.html#a75d9893c4d5bcfa1c67a0c25b6d6abda">NOISEESTIMATEPLUGIN::NoiseEstimate::init</a></div><div class="ttdeci">virtual void init()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00105">noiseestimate.cpp:105</a></div></div>
<div class="ttc" id="a05763_html_a287da7b885242b8e50e908604c0710cc"><div class="ttname"><a href="a05763.html#a287da7b885242b8e50e908604c0710cc">NOISEESTIMATEPLUGIN::NoiseEstimate::run</a></div><div class="ttdeci">virtual void run()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00295">noiseestimate.cpp:295</a></div></div>
<div class="ttc" id="a05763_html_aaa55a63ad8f5bbab959495567ee64827"><div class="ttname"><a href="a05763.html#aaa55a63ad8f5bbab959495567ee64827">NOISEESTIMATEPLUGIN::NoiseEstimate::appendNoiseSpectrum</a></div><div class="ttdeci">void appendNoiseSpectrum(Eigen::MatrixXd)</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00283">noiseestimate.cpp:283</a></div></div>
<div class="ttc" id="a04783_html_aa8d868b14887588ea01039e7ea906e9f"><div class="ttname"><a href="a04783.html#aa8d868b14887588ea01039e7ea906e9f">IOBUFFER::CircularMatrixBuffer::pop</a></div><div class="ttdeci">Matrix&lt; _Tp, Dynamic, Dynamic &gt; pop()</div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00266">circularmatrixbuffer.h:266</a></div></div>
<div class="ttc" id="a04783_html_a7d2b0b1f5eeec20bb39f14543fc9edad"><div class="ttname"><a href="a04783.html#a7d2b0b1f5eeec20bb39f14543fc9edad">IOBUFFER::CircularMatrixBuffer::cols</a></div><div class="ttdeci">quint32 cols() const</div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00332">circularmatrixbuffer.h:332</a></div></div>
<div class="ttc" id="a05343_html_aa4d25750a6f70919b331b82be5728a3a"><div class="ttname"><a href="a05343.html#aa4d25750a6f70919b331b82be5728a3a">SCSHAREDLIB::IAlgorithm::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; IAlgorithm &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a02249_source.html#l00074">IAlgorithm.h:74</a></div></div>
<div class="ttc" id="a05763_html_a271d43f47a39254f7d2fe145ae76e426"><div class="ttname"><a href="a05763.html#a271d43f47a39254f7d2fe145ae76e426">NOISEESTIMATEPLUGIN::NoiseEstimate::start</a></div><div class="ttdeci">virtual bool start()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00165">noiseestimate.cpp:165</a></div></div>
<div class="ttc" id="a04743_html"><div class="ttname"><a href="a04743.html">RTPROCESSINGLIB::RtNoise</a></div><div class="ttdoc">Real-time Noise estimation. </div><div class="ttdef"><b>Definition:</b> <a href="a01502_source.html#l00109">rtnoise.h:109</a></div></div>
<div class="ttc" id="a04783_html_a47b3787b6eee3c1e8160821d5e3ad054"><div class="ttname"><a href="a04783.html#a47b3787b6eee3c1e8160821d5e3ad054">IOBUFFER::CircularMatrixBuffer::releaseFromPop</a></div><div class="ttdeci">bool releaseFromPop()</div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00350">circularmatrixbuffer.h:350</a></div></div>
<div class="ttc" id="a05391_html_a8223ab9c31dbedbff2f257c2efd8c67b"><div class="ttname"><a href="a05391.html#a8223ab9c31dbedbff2f257c2efd8c67b">SCSHAREDLIB::PluginOutputData::create</a></div><div class="ttdeci">static QSharedPointer&lt; PluginOutputData&lt; T &gt; &gt; create(IPlugin *parent, const QString &amp;name, const QString &amp;descr)</div><div class="ttdef"><b>Definition:</b> <a href="a02312_source.html#l00126">pluginoutputdata.h:126</a></div></div>
<div class="ttc" id="a05351_html_addfb10f54b9f7aaed5a12ad5665d8b5d"><div class="ttname"><a href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5d">SCSHAREDLIB::IPlugin::PluginType</a></div><div class="ttdeci">PluginType</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00100">IPlugin.h:100</a></div></div>
<div class="ttc" id="a05299_html_ab0a022ec36c13e2f29d09aa4e08dc85d"><div class="ttname"><a href="a05299.html#ab0a022ec36c13e2f29d09aa4e08dc85d">SCMEASLIB::Measurement::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; Measurement &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a02183_source.html#l00070">measurement.h:70</a></div></div>
<div class="ttc" id="a05763_html_a1ac7012c939f59d5f55564a23f66f58b"><div class="ttname"><a href="a05763.html#a1ac7012c939f59d5f55564a23f66f58b">NOISEESTIMATEPLUGIN::NoiseEstimate::setupWidget</a></div><div class="ttdeci">virtual QWidget * setupWidget()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00233">noiseestimate.cpp:233</a></div></div>
<div class="ttc" id="a04783_html"><div class="ttname"><a href="a04783.html">IOBUFFER::CircularMatrixBuffer</a></div><div class="ttdoc">The circular matrix buffer. </div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00100">circularmatrixbuffer.h:100</a></div></div>
<div class="ttc" id="a03205_html"><div class="ttname"><a href="a03205.html">SCSHAREDLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a02249_source.html#l00060">IAlgorithm.h:60</a></div></div>
<div class="ttc" id="a05379_html_ac8fc3f9ee35cd2c8336cadb3e7c6f5df"><div class="ttname"><a href="a05379.html#ac8fc3f9ee35cd2c8336cadb3e7c6f5df">SCSHAREDLIB::PluginInputData::create</a></div><div class="ttdeci">static QSharedPointer&lt; PluginInputData&lt; T &gt; &gt; create(IPlugin *parent, const QString &amp;name, const QString &amp;descr)</div><div class="ttdef"><b>Definition:</b> <a href="a02294_source.html#l00126">plugininputdata.h:126</a></div></div>
<div class="ttc" id="a05763_html_ad8d68d2e5aab57ef68e9dfac5795270e"><div class="ttname"><a href="a05763.html#ad8d68d2e5aab57ef68e9dfac5795270e">NOISEESTIMATEPLUGIN::NoiseEstimate::getType</a></div><div class="ttdeci">virtual IPlugin::PluginType getType() const</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00217">noiseestimate.cpp:217</a></div></div>
<div class="ttc" id="a02834_html"><div class="ttname"><a href="a02834.html">noiseestimate.h</a></div><div class="ttdoc">Contains the declaration of the NoiseEstimate class. </div></div>
<div class="ttc" id="a03225_html"><div class="ttname"><a href="a03225.html">NOISEESTIMATEPLUGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="a02828_source.html#l00078">noiseestimatesetupwidget.h:78</a></div></div>
<div class="ttc" id="a05763_html_ada6933db71cbc8f9569d7bdf873bbfba"><div class="ttname"><a href="a05763.html#ada6933db71cbc8f9569d7bdf873bbfba">NOISEESTIMATEPLUGIN::NoiseEstimate::unload</a></div><div class="ttdeci">virtual void unload()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00137">noiseestimate.cpp:137</a></div></div>
<div class="ttc" id="a05763_html_a7c6087315289dfb11f3a54fb0be47ec8"><div class="ttname"><a href="a05763.html#a7c6087315289dfb11f3a54fb0be47ec8">NOISEESTIMATEPLUGIN::NoiseEstimate::~NoiseEstimate</a></div><div class="ttdeci">~NoiseEstimate()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00084">noiseestimate.cpp:84</a></div></div>
<div class="ttc" id="a05763_html_a93720fc35956198b08703d8e07a50186"><div class="ttname"><a href="a05763.html#a93720fc35956198b08703d8e07a50186">NOISEESTIMATEPLUGIN::NoiseEstimate::stop</a></div><div class="ttdeci">virtual bool stop()</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00184">noiseestimate.cpp:184</a></div></div>
<div class="ttc" id="a05763_html_a510d81a926a84a35d2dfcbfcd2421bd1"><div class="ttname"><a href="a05763.html#a510d81a926a84a35d2dfcbfcd2421bd1">NOISEESTIMATEPLUGIN::NoiseEstimate::clone</a></div><div class="ttdeci">virtual QSharedPointer&lt; IPlugin &gt; clone() const</div><div class="ttdef"><b>Definition:</b> <a href="a02831_source.html#l00093">noiseestimate.cpp:93</a></div></div>
<div class="ttc" id="a05763_html_a4e10e5a2574b1b8d0878221db149d807"><div class="ttname"><a href="a05763.html#a4e10e5a2574b1b8d0878221db149d807">NOISEESTIMATEPLUGIN::NoiseEstimate::SetNoisePara</a></div><div class="ttdeci">void SetNoisePara(qint32 nFFT, int fs)</div></div>
<div class="ttc" id="a05351_html_a3d20989cd2175fa71bf77ceb0c99f353"><div class="ttname"><a href="a05351.html#a3d20989cd2175fa71bf77ceb0c99f353">SCSHAREDLIB::IPlugin::m_outputConnectors</a></div><div class="ttdeci">OutputConnectorList m_outputConnectors</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00222">IPlugin.h:222</a></div></div>
<div class="ttc" id="a05759_html"><div class="ttname"><a href="a05759.html">NOISEESTIMATEPLUGIN::NoiseEstimateSetupWidget</a></div><div class="ttdoc">The NoiseEstimateSetupWidget class provides the NoiseEstimate configuration window. </div><div class="ttdef"><b>Definition:</b> <a href="a02828_source.html#l00096">noiseestimatesetupwidget.h:96</a></div></div>
<div class="ttc" id="a03204_html"><div class="ttname"><a href="a03204.html">SCMEASLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a02138_source.html#l00078">realtimeconnectivityestimatewidget.h:78</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 18 2019 19:35:42
</small></address>
</body>
</html>