<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>MNE-CPP Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a class="site-logo" href="http://www.mne-cpp.org/" title="A Framework for Electrophysiology"><img alt="Logo" src="MNE-CPP_Doxygen_Logo.svg"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MNE-CPP
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A Framework for Electrophysiology</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a6e4fee11f07c3b70486e88fe92cbbdc.html">applications</a></li><li class="navelem"><a class="el" href="dir_e446c6e1cb3fc1a93d99e5b33bb756bc.html">mne_scan</a></li><li class="navelem"><a class="el" href="dir_dff0cf57900fd280f21b02b063bc8d88.html">plugins</a></li><li class="navelem"><a class="el" href="dir_b5dc292512dd9527fbdd18a2e158a35f.html">rapmusictoolbox</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">rapmusictoolbox.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a02873.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment"></span><span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment">// INCLUDES</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02876.html">rapmusictoolbox.h</a>&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02870.html">FormFiles/rapmusictoolboxsetupwidget.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// QT INCLUDES</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;QtCore/QtPlugin&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;QtConcurrent&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;QDebug&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">// USED NAMESPACES</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03227.html">RAPMUSICTOOLBOXPLUGIN</a>;</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03162.html">FIFFLIB</a>;</div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03204.html">SCMEASLIB</a>;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">// DEFINE MEMBER METHODS</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="a05787.html#ae0babb3c90054e90e2ad40668b19f089">   71</a></span>&#160;<a class="code" href="a05787.html#ae0babb3c90054e90e2ad40668b19f089">RapMusicToolbox::RapMusicToolbox</a>()</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;: m_bIsRunning(false)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;, m_bReceiveData(false)</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;, m_bProcessData(false)</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;, m_bFinishedClustering(false)</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;, m_qFileFwdSolution(QCoreApplication::applicationDirPath() + <span class="stringliteral">&quot;/MNE-sample-data/MEG/sample/sample_audvis-meg-eeg-oct-6-fwd.fif&quot;</span>)</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;, m_sAtlasDir(QCoreApplication::applicationDirPath() + <span class="stringliteral">&quot;/MNE-sample-data/subjects/sample/label&quot;</span>)</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;, m_sSurfaceDir(QCoreApplication::applicationDirPath() + <span class="stringliteral">&quot;/MNE-sample-data/subjects/sample/surf&quot;</span>)</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;, m_iNumAverages(10)</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;, m_iDownSample(4)</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno"><a class="line" href="a05787.html#a47d4ac4ece2bc313106d05524b45c52a">   88</a></span>&#160;<a class="code" href="a05787.html#a47d4ac4ece2bc313106d05524b45c52a">RapMusicToolbox::~RapMusicToolbox</a>()</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;{</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    <span class="keywordflow">if</span>(this-&gt;isRunning())</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        <a class="code" href="a05787.html#aa10cfef70292f9599e5037819b5d7d16">stop</a>();</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;}</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="a05787.html#a5bbbaecc7f6ff38a1c85d2d9cf7cfdb0">   97</a></span>&#160;QSharedPointer&lt;IPlugin&gt; <a class="code" href="a05787.html#a5bbbaecc7f6ff38a1c85d2d9cf7cfdb0">RapMusicToolbox::clone</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    QSharedPointer&lt;RapMusicToolbox&gt; pRapMusicToolboxClone(<span class="keyword">new</span> <a class="code" href="a05787.html#ae0babb3c90054e90e2ad40668b19f089">RapMusicToolbox</a>());</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="keywordflow">return</span> pRapMusicToolboxClone;</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;<span class="comment">// Creating required display instances and set configurations</span></div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno"><a class="line" href="a05787.html#ac2e6838b47cbff249ed19bd7e51f8943">  109</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05787.html#ac2e6838b47cbff249ed19bd7e51f8943">RapMusicToolbox::init</a>()</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;{</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// Inits</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    m_pFwd = <a class="code" href="a04647.html#a7e95a8381a0f621201981cd6a39ea25c">MNEForwardSolution::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a04647.html">MNEForwardSolution</a>(m_qFileFwdSolution));</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    m_pAnnotationSet = <a class="code" href="a03999.html#a220d7c73355df37b8c68eb1b869342b4">AnnotationSet::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a03999.html">AnnotationSet</a>(m_sAtlasDir+<span class="stringliteral">&quot;/lh.aparc.a2009s.annot&quot;</span>, m_sAtlasDir+<span class="stringliteral">&quot;/rh.aparc.a2009s.annot&quot;</span>));</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    m_pSurfaceSet = <a class="code" href="a04015.html#a6710e7cb52dc6353b78d956caef34cf0">SurfaceSet::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a04015.html">SurfaceSet</a>(m_sSurfaceDir+<span class="stringliteral">&quot;/lh.white&quot;</span>, m_sSurfaceDir+<span class="stringliteral">&quot;/rh.white&quot;</span>));</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// Input</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    m_pRTEInput = <a class="code" href="a05379.html#ac8fc3f9ee35cd2c8336cadb3e7c6f5df">PluginInputData&lt;RealTimeEvokedSet&gt;::create</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;RapMusic Toolbox RTE In&quot;</span>, <span class="stringliteral">&quot;RapMusic Toolbox real-time evoked input data&quot;</span>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    connect(m_pRTEInput.data(), &amp;PluginInputConnector::notify, <span class="keyword">this</span>, &amp;<a class="code" href="a05787.html#a05293e6f01ecf9f00c9315da7a49276c">RapMusicToolbox::updateRTE</a>, Qt::DirectConnection);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="a05351.html#a469449e76829b8395ca018db00d78c04">m_inputConnectors</a>.append(m_pRTEInput);</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <span class="comment">// Output</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    m_pRTSEOutput = <a class="code" href="a05391.html#a8223ab9c31dbedbff2f257c2efd8c67b">PluginOutputData&lt;RealTimeSourceEstimate&gt;::create</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;MNEOut&quot;</span>, <span class="stringliteral">&quot;RapMusic Toolbox output data&quot;</span>);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="a05351.html#a3d20989cd2175fa71bf77ceb0c99f353">m_outputConnectors</a>.append(m_pRTSEOutput);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    m_pRTSEOutput-&gt;data()-&gt;setName(<span class="stringliteral">&quot;Real-Time Source Estimate&quot;</span>);</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    m_pRTSEOutput-&gt;data()-&gt;setAnnotSet(m_pAnnotationSet);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    m_pRTSEOutput-&gt;data()-&gt;setSurfSet(m_pSurfaceSet);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    m_pRTSEOutput-&gt;data()-&gt;setFwdSolution(m_pFwd);</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// start clustering</span></div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    QFuture&lt;void&gt; future = QtConcurrent::run(<span class="keyword">this</span>, &amp;RapMusicToolbox::doClustering);</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;}</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;</div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="a05787.html#aeaf770464aebecf0e17571247b143c69">  137</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05787.html#aeaf770464aebecf0e17571247b143c69">RapMusicToolbox::unload</a>()</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;}</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="keywordtype">void</span> RapMusicToolbox::calcFiffInfo()</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;{</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    QMutexLocker locker(&amp;m_qMutex);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">if</span>(m_pFiffInfoEvoked &amp;&amp; m_pFiffInfoForward)</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Fiff Infos available&quot;</span>;</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        m_qListPickChannels.clear();</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="keywordflow">foreach</span> (<span class="keyword">const</span> QString &amp;ch, m_pFiffInfoForward-&gt;ch_names)</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        {</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="keywordflow">if</span>(m_pFiffInfoEvoked-&gt;ch_names.contains(ch))</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                m_qListPickChannels &lt;&lt; ch;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        }</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;        RowVectorXi sel = m_pFiffInfoEvoked-&gt;pick_channels(m_qListPickChannels);</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        m_pFiffInfo = QSharedPointer&lt;FiffInfo&gt;(<span class="keyword">new</span> <a class="code" href="a03927.html">FiffInfo</a>(m_pFiffInfoEvoked-&gt;pick_info(sel)));</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    }</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<span class="keywordtype">void</span> RapMusicToolbox::doClustering()</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;{</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    emit <a class="code" href="a05787.html#a378244896efd883b3f411cdfcc161001">clusteringStarted</a>();</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    m_bFinishedClustering = <span class="keyword">false</span>;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    m_pClusteredFwd = <a class="code" href="a04647.html#a7e95a8381a0f621201981cd6a39ea25c">MNEForwardSolution::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a04647.html">MNEForwardSolution</a>(m_pFwd-&gt;cluster_forward_solution(*m_pAnnotationSet.data(), 40)));</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    finishedClustering();</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;}</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keywordtype">void</span> RapMusicToolbox::finishedClustering()</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;{</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    m_bFinishedClustering = <span class="keyword">true</span>;</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    m_pFiffInfoForward = QSharedPointer&lt;FiffInfoBase&gt;(<span class="keyword">new</span> <a class="code" href="a03931.html">FiffInfoBase</a>(m_pClusteredFwd-&gt;info));</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    emit <a class="code" href="a05787.html#ac0745ec635e2abe3fd086d8ae2f81e89">clusteringFinished</a>();</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;}</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="a05787.html#a9ce5ca36571e782b4f61481f3db30581">  197</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05787.html#a9ce5ca36571e782b4f61481f3db30581">RapMusicToolbox::start</a>()</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;{</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;<span class="comment">//    //Check if the thread is already or still running. This can happen if the start button is pressed immediately after the stop button was pressed. In this case the stopping process is not finished yet but the start process is initiated.</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;<span class="comment">//    if(this-&gt;isRunning())</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;<span class="comment">//        QThread::wait();</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordflow">if</span>(m_bFinishedClustering)</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    {</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        m_bIsRunning = <span class="keyword">true</span>;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        QThread::start();</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">else</span></div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;}</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno"><a class="line" href="a05787.html#aa10cfef70292f9599e5037819b5d7d16">  216</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05787.html#aa10cfef70292f9599e5037819b5d7d16">RapMusicToolbox::stop</a>()</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;{</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">//    //Check if the thread is already or still running. This can happen if the start button is pressed immediately after the stop button was pressed. In this case the stopping process is not finished yet but the start process is initiated.</span></div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">//    if(this-&gt;isRunning())</span></div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment">//        QThread::wait();</span></div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    m_bIsRunning = <span class="keyword">false</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <span class="keywordflow">if</span>(m_bProcessData) <span class="comment">// Only clear if buffers have been initialised</span></div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        m_qVecFiffEvoked.clear();</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">// Stop filling buffers with data from the inputs</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    m_bProcessData = <span class="keyword">false</span>;</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    m_bReceiveData = <span class="keyword">false</span>;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;}</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div><div class="line"><a name="l00241"></a><span class="lineno"><a class="line" href="a05787.html#a4f9f3518f480cfd13bfe98a4b24a5db3">  241</a></span>&#160;<a class="code" href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5d">IPlugin::PluginType</a> <a class="code" href="a05787.html#a4f9f3518f480cfd13bfe98a4b24a5db3">RapMusicToolbox::getType</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5da1dcae522385b31a0bb1d950224b3de2f">_IAlgorithm</a>;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;}</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno"><a class="line" href="a05787.html#a1f3ae1390043fe0097c0afb4530f8a35">  249</a></span>&#160;QString <a class="code" href="a05787.html#a1f3ae1390043fe0097c0afb4530f8a35">RapMusicToolbox::getName</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;RTC-MUSIC&quot;</span>;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;}</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno"><a class="line" href="a05787.html#a92e3b6b246d6b1adab776d0b23dc05f0">  257</a></span>&#160;QWidget* <a class="code" href="a05787.html#a92e3b6b246d6b1adab776d0b23dc05f0">RapMusicToolbox::setupWidget</a>()</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;{</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    <a class="code" href="a05783.html">RapMusicToolboxSetupWidget</a>* <a class="code" href="a05787.html#a92e3b6b246d6b1adab776d0b23dc05f0">setupWidget</a> = <span class="keyword">new</span> <a class="code" href="a05783.html">RapMusicToolboxSetupWidget</a>(<span class="keyword">this</span>);<span class="comment">//widget is later distroyed by CentralWidget - so it has to be created everytime new</span></div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordflow">if</span>(!m_bFinishedClustering)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        setupWidget-&gt;<a class="code" href="a05783.html#ae29d3293c0147104936e0d768ee85e40">setClusteringState</a>();</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    connect(<span class="keyword">this</span>, &amp;<a class="code" href="a05787.html#a378244896efd883b3f411cdfcc161001">RapMusicToolbox::clusteringStarted</a>, setupWidget, &amp;<a class="code" href="a05783.html#ae29d3293c0147104936e0d768ee85e40">RapMusicToolboxSetupWidget::setClusteringState</a>);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    connect(<span class="keyword">this</span>, &amp;<a class="code" href="a05787.html#ac0745ec635e2abe3fd086d8ae2f81e89">RapMusicToolbox::clusteringFinished</a>, setupWidget, &amp;<a class="code" href="a05783.html#aab554f2529fbcab896f67143bc900a0f">RapMusicToolboxSetupWidget::setSetupState</a>);</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a05787.html#a92e3b6b246d6b1adab776d0b23dc05f0">setupWidget</a>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;}</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div><div class="line"><a name="l00273"></a><span class="lineno"><a class="line" href="a05787.html#a05293e6f01ecf9f00c9315da7a49276c">  273</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05787.html#a05293e6f01ecf9f00c9315da7a49276c">RapMusicToolbox::updateRTE</a>(<a class="code" href="a05299.html#ab0a022ec36c13e2f29d09aa4e08dc85d">SCMEASLIB::Measurement::SPtr</a> pMeasurement)</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;{</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;    QSharedPointer&lt;RealTimeEvokedSet&gt; pRTE = pMeasurement.dynamicCast&lt;<a class="code" href="a05319.html">RealTimeEvokedSet</a>&gt;();</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    QMutexLocker locker(&amp;m_qMutex);</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">//MEG</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span>(pRTE &amp;&amp; m_bReceiveData)</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    {</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">//Fiff Information of the evoked</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">if</span>(!m_pFiffInfoEvoked)</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            m_pFiffInfoEvoked = QSharedPointer&lt;FiffInfo&gt;(<span class="keyword">new</span> <a class="code" href="a03927.html">FiffInfo</a>(pRTE-&gt;getValue()-&gt;info));</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;        <span class="keywordflow">if</span>(m_bProcessData)</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;            m_qVecFiffEvoked.push_back(pRTE-&gt;getValue()-&gt;pick_channels(m_qListPickChannels));</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    }</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;}</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;</div><div class="line"><a name="l00293"></a><span class="lineno"><a class="line" href="a05787.html#ab84e79fa396c815fde6a163dcb5a7f37">  293</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05787.html#ab84e79fa396c815fde6a163dcb5a7f37">RapMusicToolbox::run</a>()</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;{</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    qint32 numDipolePairs = 1;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// start receiving data</span></div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    m_bReceiveData = <span class="keyword">true</span>;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// Read Fiff Info</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    {</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;        {</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            QMutexLocker locker(&amp;m_qMutex);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;            <span class="keywordflow">if</span>(m_pFiffInfo)</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;        }</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        calcFiffInfo();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        msleep(10);<span class="comment">// Wait for fiff Info</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    m_pPwlRapMusic.reset();</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    m_pPwlRapMusic = <a class="code" href="a04267.html#a3c29ba1fbcda2b92c6a2bedb26a3bb86">RapMusic::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a04267.html">RapMusic</a>(*m_pClusteredFwd, <span class="keyword">false</span>, numDipolePairs));</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="comment">// start processing data</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    m_qMutex.lock();</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    m_bProcessData = <span class="keyword">true</span>;</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    m_qMutex.unlock();</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    qint32 skip_count = 0;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">while</span>(<span class="keyword">true</span>)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    {</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        {</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            QMutexLocker locker(&amp;m_qMutex);</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;            <span class="keywordflow">if</span>(!m_bIsRunning)</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;                <span class="keywordflow">break</span>;</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        }</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;        m_qMutex.lock();</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;        qint32 t_evokedSize = m_qVecFiffEvoked.size();</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        m_qMutex.unlock();</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">if</span>(t_evokedSize &gt; 0)</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;            <span class="keywordflow">if</span>(m_pPwlRapMusic &amp;&amp; ((skip_count % 10) == 0))</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;                m_qMutex.lock();</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                <a class="code" href="a03911.html">FiffEvoked</a> t_fiffEvoked = m_qVecFiffEvoked[0].evoked.first();</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                m_pPwlRapMusic-&gt;setStcAttr(t_fiffEvoked.<a class="code" href="a03911.html#a3f4cd66566082b0a22fd5da33ce747ce">data</a>.cols()/4.0,0.0);</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                m_qVecFiffEvoked.pop_front();</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                m_qMutex.unlock();</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                qDebug() &lt;&lt; <span class="stringliteral">&quot;m_pRapMusic-&gt;calculateInverse&quot;</span>;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                <a class="code" href="a04671.html">MNESourceEstimate</a> sourceEstimate = m_pPwlRapMusic-&gt;calculateInverse(t_fiffEvoked);</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                m_pRTSEOutput-&gt;data()-&gt;setValue(sourceEstimate);</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            }</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <span class="keywordflow">else</span></div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;            {</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                m_qMutex.lock();</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                m_qVecFiffEvoked.pop_front();</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                m_qMutex.unlock();</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;            ++skip_count;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    }</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;}</div><div class="ttc" id="a05351_html_addfb10f54b9f7aaed5a12ad5665d8b5da1dcae522385b31a0bb1d950224b3de2f"><div class="ttname"><a href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5da1dcae522385b31a0bb1d950224b3de2f">SCSHAREDLIB::IPlugin::_IAlgorithm</a></div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00103">IPlugin.h:103</a></div></div>
<div class="ttc" id="a05787_html_ae0babb3c90054e90e2ad40668b19f089"><div class="ttname"><a href="a05787.html#ae0babb3c90054e90e2ad40668b19f089">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::RapMusicToolbox</a></div><div class="ttdeci">RapMusicToolbox()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00071">rapmusictoolbox.cpp:71</a></div></div>
<div class="ttc" id="a04015_html_a6710e7cb52dc6353b78d956caef34cf0"><div class="ttname"><a href="a04015.html#a6710e7cb52dc6353b78d956caef34cf0">FSLIB::SurfaceSet::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; SurfaceSet &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a00998_source.html#l00086">surfaceset.h:86</a></div></div>
<div class="ttc" id="a04671_html"><div class="ttname"><a href="a04671.html">MNELIB::MNESourceEstimate</a></div><div class="ttdoc">Source estimation. </div><div class="ttdef"><b>Definition:</b> <a href="a01448_source.html#l00094">mne_sourceestimate.h:94</a></div></div>
<div class="ttc" id="a05787_html_a4f9f3518f480cfd13bfe98a4b24a5db3"><div class="ttname"><a href="a05787.html#a4f9f3518f480cfd13bfe98a4b24a5db3">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::getType</a></div><div class="ttdeci">virtual IPlugin::PluginType getType() const</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00241">rapmusictoolbox.cpp:241</a></div></div>
<div class="ttc" id="a05351_html_a469449e76829b8395ca018db00d78c04"><div class="ttname"><a href="a05351.html#a469449e76829b8395ca018db00d78c04">SCSHAREDLIB::IPlugin::m_inputConnectors</a></div><div class="ttdeci">InputConnectorList m_inputConnectors</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00221">IPlugin.h:221</a></div></div>
<div class="ttc" id="a05787_html_a9ce5ca36571e782b4f61481f3db30581"><div class="ttname"><a href="a05787.html#a9ce5ca36571e782b4f61481f3db30581">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::start</a></div><div class="ttdeci">virtual bool start()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00197">rapmusictoolbox.cpp:197</a></div></div>
<div class="ttc" id="a03227_html"><div class="ttname"><a href="a03227.html">RAPMUSICTOOLBOXPLUGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="a02864_source.html#l00060">rapmusictoolboxaboutwidget.h:60</a></div></div>
<div class="ttc" id="a03927_html"><div class="ttname"><a href="a03927.html">FIFFLIB::FiffInfo</a></div><div class="ttdoc">FIFF measurement file information. </div><div class="ttdef"><b>Definition:</b> <a href="a00908_source.html#l00096">fiff_info.h:96</a></div></div>
<div class="ttc" id="a04015_html"><div class="ttname"><a href="a04015.html">FSLIB::SurfaceSet</a></div><div class="ttdoc">A hemisphere set of surfaces. </div><div class="ttdef"><b>Definition:</b> <a href="a00998_source.html#l00083">surfaceset.h:83</a></div></div>
<div class="ttc" id="a05787_html_aa10cfef70292f9599e5037819b5d7d16"><div class="ttname"><a href="a05787.html#aa10cfef70292f9599e5037819b5d7d16">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::stop</a></div><div class="ttdeci">virtual bool stop()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00216">rapmusictoolbox.cpp:216</a></div></div>
<div class="ttc" id="a05787_html_aeaf770464aebecf0e17571247b143c69"><div class="ttname"><a href="a05787.html#aeaf770464aebecf0e17571247b143c69">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::unload</a></div><div class="ttdeci">virtual void unload()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00137">rapmusictoolbox.cpp:137</a></div></div>
<div class="ttc" id="a04647_html"><div class="ttname"><a href="a04647.html">MNELIB::MNEForwardSolution</a></div><div class="ttdoc">Forward operator. </div><div class="ttdef"><b>Definition:</b> <a href="a01427_source.html#l00190">mne_forwardsolution.h:190</a></div></div>
<div class="ttc" id="a03162_html"><div class="ttname"><a href="a03162.html">FIFFLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a00059_source.html#l00079">connectivitysettings.h:79</a></div></div>
<div class="ttc" id="a02876_html"><div class="ttname"><a href="a02876.html">rapmusictoolbox.h</a></div><div class="ttdoc">Contains the declaration of the RapMusicToolbox class. </div></div>
<div class="ttc" id="a05783_html"><div class="ttname"><a href="a05783.html">RAPMUSICTOOLBOXPLUGIN::RapMusicToolboxSetupWidget</a></div><div class="ttdoc">The DummySetupWidget class provides the DummyToolbox configuration window. </div><div class="ttdef"><b>Definition:</b> <a href="a02870_source.html#l00086">rapmusictoolboxsetupwidget.h:86</a></div></div>
<div class="ttc" id="a04267_html"><div class="ttname"><a href="a04267.html">INVERSELIB::RapMusic</a></div><div class="ttdoc">The RapMusic class provides the RAP MUSIC Algorithm CPU implementation. ToDo: Paper references...</div><div class="ttdef"><b>Definition:</b> <a href="a01175_source.html#l00109">rapmusic.h:109</a></div></div>
<div class="ttc" id="a05787_html_ac2e6838b47cbff249ed19bd7e51f8943"><div class="ttname"><a href="a05787.html#ac2e6838b47cbff249ed19bd7e51f8943">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::init</a></div><div class="ttdeci">virtual void init()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00109">rapmusictoolbox.cpp:109</a></div></div>
<div class="ttc" id="a05787_html_ac0745ec635e2abe3fd086d8ae2f81e89"><div class="ttname"><a href="a05787.html#ac0745ec635e2abe3fd086d8ae2f81e89">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::clusteringFinished</a></div><div class="ttdeci">void clusteringFinished()</div></div>
<div class="ttc" id="a03999_html"><div class="ttname"><a href="a03999.html">FSLIB::AnnotationSet</a></div><div class="ttdoc">Annotation set. </div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00096">annotationset.h:96</a></div></div>
<div class="ttc" id="a05787_html_a92e3b6b246d6b1adab776d0b23dc05f0"><div class="ttname"><a href="a05787.html#a92e3b6b246d6b1adab776d0b23dc05f0">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::setupWidget</a></div><div class="ttdeci">virtual QWidget * setupWidget()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00257">rapmusictoolbox.cpp:257</a></div></div>
<div class="ttc" id="a05787_html_a05293e6f01ecf9f00c9315da7a49276c"><div class="ttname"><a href="a05787.html#a05293e6f01ecf9f00c9315da7a49276c">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::updateRTE</a></div><div class="ttdeci">void updateRTE(SCMEASLIB::Measurement::SPtr pMeasurement)</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00273">rapmusictoolbox.cpp:273</a></div></div>
<div class="ttc" id="a05391_html_a8223ab9c31dbedbff2f257c2efd8c67b"><div class="ttname"><a href="a05391.html#a8223ab9c31dbedbff2f257c2efd8c67b">SCSHAREDLIB::PluginOutputData::create</a></div><div class="ttdeci">static QSharedPointer&lt; PluginOutputData&lt; T &gt; &gt; create(IPlugin *parent, const QString &amp;name, const QString &amp;descr)</div><div class="ttdef"><b>Definition:</b> <a href="a02312_source.html#l00126">pluginoutputdata.h:126</a></div></div>
<div class="ttc" id="a02870_html"><div class="ttname"><a href="a02870.html">rapmusictoolboxsetupwidget.h</a></div><div class="ttdoc">Contains the declaration of the RapMusicToolboxSetupWidget class. </div></div>
<div class="ttc" id="a05787_html_a5bbbaecc7f6ff38a1c85d2d9cf7cfdb0"><div class="ttname"><a href="a05787.html#a5bbbaecc7f6ff38a1c85d2d9cf7cfdb0">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::clone</a></div><div class="ttdeci">virtual QSharedPointer&lt; IPlugin &gt; clone() const</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00097">rapmusictoolbox.cpp:97</a></div></div>
<div class="ttc" id="a05351_html_addfb10f54b9f7aaed5a12ad5665d8b5d"><div class="ttname"><a href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5d">SCSHAREDLIB::IPlugin::PluginType</a></div><div class="ttdeci">PluginType</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00100">IPlugin.h:100</a></div></div>
<div class="ttc" id="a03911_html_a3f4cd66566082b0a22fd5da33ce747ce"><div class="ttname"><a href="a03911.html#a3f4cd66566082b0a22fd5da33ce747ce">FIFFLIB::FiffEvoked::data</a></div><div class="ttdeci">MatrixXd data</div><div class="ttdef"><b>Definition:</b> <a href="a00881_source.html#l00237">fiff_evoked.h:237</a></div></div>
<div class="ttc" id="a04647_html_a7e95a8381a0f621201981cd6a39ea25c"><div class="ttname"><a href="a04647.html#a7e95a8381a0f621201981cd6a39ea25c">MNELIB::MNEForwardSolution::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; MNEForwardSolution &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a01427_source.html#l00193">mne_forwardsolution.h:193</a></div></div>
<div class="ttc" id="a05299_html_ab0a022ec36c13e2f29d09aa4e08dc85d"><div class="ttname"><a href="a05299.html#ab0a022ec36c13e2f29d09aa4e08dc85d">SCMEASLIB::Measurement::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; Measurement &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a02183_source.html#l00070">measurement.h:70</a></div></div>
<div class="ttc" id="a05379_html_ac8fc3f9ee35cd2c8336cadb3e7c6f5df"><div class="ttname"><a href="a05379.html#ac8fc3f9ee35cd2c8336cadb3e7c6f5df">SCSHAREDLIB::PluginInputData::create</a></div><div class="ttdeci">static QSharedPointer&lt; PluginInputData&lt; T &gt; &gt; create(IPlugin *parent, const QString &amp;name, const QString &amp;descr)</div><div class="ttdef"><b>Definition:</b> <a href="a02294_source.html#l00126">plugininputdata.h:126</a></div></div>
<div class="ttc" id="a05783_html_ae29d3293c0147104936e0d768ee85e40"><div class="ttname"><a href="a05783.html#ae29d3293c0147104936e0d768ee85e40">RAPMUSICTOOLBOXPLUGIN::RapMusicToolboxSetupWidget::setClusteringState</a></div><div class="ttdeci">void setClusteringState()</div><div class="ttdef"><b>Definition:</b> <a href="a02867_source.html#l00112">rapmusictoolboxsetupwidget.cpp:112</a></div></div>
<div class="ttc" id="a05787_html_ab84e79fa396c815fde6a163dcb5a7f37"><div class="ttname"><a href="a05787.html#ab84e79fa396c815fde6a163dcb5a7f37">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::run</a></div><div class="ttdeci">virtual void run()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00293">rapmusictoolbox.cpp:293</a></div></div>
<div class="ttc" id="a03911_html"><div class="ttname"><a href="a03911.html">FIFFLIB::FiffEvoked</a></div><div class="ttdoc">evoked data </div><div class="ttdef"><b>Definition:</b> <a href="a00881_source.html#l00093">fiff_evoked.h:93</a></div></div>
<div class="ttc" id="a05319_html"><div class="ttname"><a href="a05319.html">SCMEASLIB::RealTimeEvokedSet</a></div><div class="ttdoc">The RealTimeEvokedSet class provides a data stream which holds FiffEvokedSet data. </div><div class="ttdef"><b>Definition:</b> <a href="a02213_source.html#l00098">realtimeevokedset.h:98</a></div></div>
<div class="ttc" id="a05787_html_a1f3ae1390043fe0097c0afb4530f8a35"><div class="ttname"><a href="a05787.html#a1f3ae1390043fe0097c0afb4530f8a35">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::getName</a></div><div class="ttdeci">virtual QString getName() const</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00249">rapmusictoolbox.cpp:249</a></div></div>
<div class="ttc" id="a04267_html_a3c29ba1fbcda2b92c6a2bedb26a3bb86"><div class="ttname"><a href="a04267.html#a3c29ba1fbcda2b92c6a2bedb26a3bb86">INVERSELIB::RapMusic::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; RapMusic &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a01175_source.html#l00112">rapmusic.h:112</a></div></div>
<div class="ttc" id="a03931_html"><div class="ttname"><a href="a03931.html">FIFFLIB::FiffInfoBase</a></div><div class="ttdoc">light measurement info </div><div class="ttdef"><b>Definition:</b> <a href="a00914_source.html#l00085">fiff_info_base.h:85</a></div></div>
<div class="ttc" id="a05787_html_a47d4ac4ece2bc313106d05524b45c52a"><div class="ttname"><a href="a05787.html#a47d4ac4ece2bc313106d05524b45c52a">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::~RapMusicToolbox</a></div><div class="ttdeci">~RapMusicToolbox()</div><div class="ttdef"><b>Definition:</b> <a href="a02873_source.html#l00088">rapmusictoolbox.cpp:88</a></div></div>
<div class="ttc" id="a03999_html_a220d7c73355df37b8c68eb1b869342b4"><div class="ttname"><a href="a03999.html#a220d7c73355df37b8c68eb1b869342b4">FSLIB::AnnotationSet::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; AnnotationSet &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a00971_source.html#l00099">annotationset.h:99</a></div></div>
<div class="ttc" id="a05787_html_a378244896efd883b3f411cdfcc161001"><div class="ttname"><a href="a05787.html#a378244896efd883b3f411cdfcc161001">RAPMUSICTOOLBOXPLUGIN::RapMusicToolbox::clusteringStarted</a></div><div class="ttdeci">void clusteringStarted()</div></div>
<div class="ttc" id="a05351_html_a3d20989cd2175fa71bf77ceb0c99f353"><div class="ttname"><a href="a05351.html#a3d20989cd2175fa71bf77ceb0c99f353">SCSHAREDLIB::IPlugin::m_outputConnectors</a></div><div class="ttdeci">OutputConnectorList m_outputConnectors</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00222">IPlugin.h:222</a></div></div>
<div class="ttc" id="a05783_html_aab554f2529fbcab896f67143bc900a0f"><div class="ttname"><a href="a05783.html#aab554f2529fbcab896f67143bc900a0f">RAPMUSICTOOLBOXPLUGIN::RapMusicToolboxSetupWidget::setSetupState</a></div><div class="ttdeci">void setSetupState()</div><div class="ttdef"><b>Definition:</b> <a href="a02867_source.html#l00121">rapmusictoolboxsetupwidget.cpp:121</a></div></div>
<div class="ttc" id="a03204_html"><div class="ttname"><a href="a03204.html">SCMEASLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a02138_source.html#l00078">realtimeconnectivityestimatewidget.h:78</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 18 2019 19:35:42
</small></address>
</body>
</html>