<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.7"/>
<title>MNE-CPP Documentation</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><a class="site-logo" href="http://www.mne-cpp.org/" title="A Framework for Electrophysiology"><img alt="Logo" src="MNE-CPP_Doxygen_Logo.svg"/></a></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">MNE-CPP
   &#160;<span id="projectnumber">1.0.0</span>
   </div>
   <div id="projectbrief">A Framework for Electrophysiology</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_a6e4fee11f07c3b70486e88fe92cbbdc.html">applications</a></li><li class="navelem"><a class="el" href="dir_e446c6e1cb3fc1a93d99e5b33bb756bc.html">mne_scan</a></li><li class="navelem"><a class="el" href="dir_dff0cf57900fd280f21b02b063bc8d88.html">plugins</a></li><li class="navelem"><a class="el" href="dir_c7f8feb3f6851657d8163206dbffb901.html">babymeg</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">babymeg.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a02387.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="comment"></span><span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="comment">// INCLUDES</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02390.html">babymeg.h</a>&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02417.html">FormFiles/babymegsetupwidget.h</a>&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02423.html">FormFiles/babymegsquidcontroldgl.h</a>&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02399.html">babymegclient.h</a>&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a02405.html">babymeginfo.h</a>&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a01583.html">utils/ioutils.h</a>&gt;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a01511.html">utils/detecttrigger.h</a>&gt;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00959.html">fiff/fiff_types.h</a>&gt;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00863.html">fiff/fiff_dig_point_set.h</a>&gt;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00425.html">disp/viewers/projectsettingsview.h</a>&gt;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00014.html">communication/rtClient/rtcmdclient.h</a>&gt;</span></div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a02219.html">scMeas/realtimemultisamplearray.h</a>&gt;</span></div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="a00773.html">disp3D/viewers/hpiview.h</a>&gt;</span></div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">// QT INCLUDES</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;<span class="preprocessor">#include &lt;QQuaternion&gt;</span></div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;<span class="preprocessor">#include &lt;QFile&gt;</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;<span class="comment">// Eigen INCLUDES</span></div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;<span class="comment">// USED NAMESPACES</span></div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03208.html">BABYMEGPLUGIN</a>;</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03167.html">UTILSLIB</a>;</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03205.html">SCSHAREDLIB</a>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03183.html">IOBUFFER</a>;</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03204.html">SCMEASLIB</a>;</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03170.html">DISP3DLIB</a>;</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="keyword">using namespace </span><a class="code" href="a03164.html">DISPLIB</a>;</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">// DEFINE MEMBER METHODS</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="comment">//=============================================================================================================</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div><div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="a05447.html#aab056584dd43354a277a04ebd6652071">   93</a></span>&#160;<a class="code" href="a05447.html#aab056584dd43354a277a04ebd6652071">BabyMEG::BabyMEG</a>()</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;: m_iBlinkStatus(0)</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;, m_iBufferSize(-1)</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;, m_bWriteToFile(false)</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;, m_bIsRunning(false)</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;, m_bUseRecordTimer(false)</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;, m_pRawMatrixBuffer(0)</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;, m_sFiffProjections(QCoreApplication::applicationDirPath() + <span class="stringliteral">&quot;/resources/mne_scan/plugins/babymeg/header.fif&quot;</span>)</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;, m_sFiffCompensators(QCoreApplication::applicationDirPath() + <span class="stringliteral">&quot;/resources/mne_scan/plugins/babymeg/compensator.fif&quot;</span>)</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;, m_sBadChannels(QCoreApplication::applicationDirPath() + <span class="stringliteral">&quot;/resources/mne_scan/plugins/babymeg/both.bad&quot;</span>)</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;, m_iRecordingMSeconds(5*60*1000)</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;, m_iSplitCount(0)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;, m_bDoContinousHPI(false)</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;{</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <a class="code" href="a05447.html#ac73656267578a1ed318df983fde18050">m_pActionSetupProject</a> = <span class="keyword">new</span> QAction(QIcon(<span class="stringliteral">&quot;:/images/database.png&quot;</span>), tr(<span class="stringliteral">&quot;Setup Project&quot;</span>),<span class="keyword">this</span>);</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//    m_pActionSetupProject-&gt;setShortcut(tr(&quot;F12&quot;));</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="a05447.html#ac73656267578a1ed318df983fde18050">m_pActionSetupProject</a>-&gt;setStatusTip(tr(<span class="stringliteral">&quot;Setup Project&quot;</span>));</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    connect(<a class="code" href="a05447.html#ac73656267578a1ed318df983fde18050">m_pActionSetupProject</a>.data(), &amp;QAction::triggered,</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a5d7135514488fbc26d50476ac3cfd14c">BabyMEG::showProjectDialog</a>);</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <a class="code" href="a05351.html#acd0c42811d473bfa88b5f280d3da6ca3">addPluginAction</a>(<a class="code" href="a05447.html#ac73656267578a1ed318df983fde18050">m_pActionSetupProject</a>);    </div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="a05447.html#aae8328637bd51c976a42e35cf4e17336">m_pActionRecordFile</a> = <span class="keyword">new</span> QAction(QIcon(<span class="stringliteral">&quot;:/images/record.png&quot;</span>), tr(<span class="stringliteral">&quot;Start Recording&quot;</span>),<span class="keyword">this</span>);</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    <a class="code" href="a05447.html#aae8328637bd51c976a42e35cf4e17336">m_pActionRecordFile</a>-&gt;setStatusTip(tr(<span class="stringliteral">&quot;Start Recording&quot;</span>));</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    connect(<a class="code" href="a05447.html#aae8328637bd51c976a42e35cf4e17336">m_pActionRecordFile</a>.data(), &amp;QAction::triggered,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a577fbaa287e78c90caa6a8123f9dddf0">BabyMEG::toggleRecordingFile</a>);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="a05351.html#acd0c42811d473bfa88b5f280d3da6ca3">addPluginAction</a>(<a class="code" href="a05447.html#aae8328637bd51c976a42e35cf4e17336">m_pActionRecordFile</a>);</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">//m_pActionRecordFile-&gt;setEnabled(false);</span></div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;    <a class="code" href="a05447.html#a9db1ea03fefc693158d32ef423ca7f1b">m_pActionSqdCtrl</a> = <span class="keyword">new</span> QAction(QIcon(<span class="stringliteral">&quot;:/images/sqdctrl.png&quot;</span>), tr(<span class="stringliteral">&quot;Squid Control&quot;</span>),<span class="keyword">this</span>);</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">//    m_pActionSetupProject-&gt;setShortcut(tr(&quot;F12&quot;));</span></div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="a05447.html#a9db1ea03fefc693158d32ef423ca7f1b">m_pActionSqdCtrl</a>-&gt;setStatusTip(tr(<span class="stringliteral">&quot;Squid Control&quot;</span>));</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    connect(<a class="code" href="a05447.html#a9db1ea03fefc693158d32ef423ca7f1b">m_pActionSqdCtrl</a>.data(), &amp;QAction::triggered,</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#ab0224f3005c95a8c49bf765f8a9c14e8">BabyMEG::showSqdCtrlDialog</a>);</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <a class="code" href="a05351.html#acd0c42811d473bfa88b5f280d3da6ca3">addPluginAction</a>(<a class="code" href="a05447.html#a9db1ea03fefc693158d32ef423ca7f1b">m_pActionSqdCtrl</a>);</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;    <a class="code" href="a05447.html#abb09ad36301c82157e67d20e68b583ff">m_pActionUpdateFiffInfo</a> = <span class="keyword">new</span> QAction(QIcon(<span class="stringliteral">&quot;:/images/latestFiffInfo.png&quot;</span>), tr(<span class="stringliteral">&quot;Update Fiff Info&quot;</span>),<span class="keyword">this</span>);</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <a class="code" href="a05447.html#abb09ad36301c82157e67d20e68b583ff">m_pActionUpdateFiffInfo</a>-&gt;setStatusTip(tr(<span class="stringliteral">&quot;Update Fiff Info&quot;</span>));</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    connect(<a class="code" href="a05447.html#abb09ad36301c82157e67d20e68b583ff">m_pActionUpdateFiffInfo</a>.data(), &amp;QAction::triggered,</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a72e4651b25bd44df78c7b2b9e8d7aecd">BabyMEG::updateFiffInfo</a>);</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="a05351.html#acd0c42811d473bfa88b5f280d3da6ca3">addPluginAction</a>(<a class="code" href="a05447.html#abb09ad36301c82157e67d20e68b583ff">m_pActionUpdateFiffInfo</a>);</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="comment">//Init HPI</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <a class="code" href="a05447.html#a2b28209aa966e9470b2eade3bfe8c692">m_pActionComputeHPI</a> = <span class="keyword">new</span> QAction(QIcon(<span class="stringliteral">&quot;:/images/latestFiffInfoHPI.png&quot;</span>), tr(<span class="stringliteral">&quot;Compute HPI&quot;</span>),<span class="keyword">this</span>);</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <a class="code" href="a05447.html#a2b28209aa966e9470b2eade3bfe8c692">m_pActionComputeHPI</a>-&gt;setStatusTip(tr(<span class="stringliteral">&quot;Compute HPI&quot;</span>));</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    connect(<a class="code" href="a05447.html#a2b28209aa966e9470b2eade3bfe8c692">m_pActionComputeHPI</a>.data(), &amp;QAction::triggered,</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a778de6e67484264f0aa432d079bbe827">BabyMEG::showHPIDialog</a>);</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="a05351.html#acd0c42811d473bfa88b5f280d3da6ca3">addPluginAction</a>(<a class="code" href="a05447.html#a2b28209aa966e9470b2eade3bfe8c692">m_pActionComputeHPI</a>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="comment">//Init timers</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">m_pRecordTimer</a>) {</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;        <a class="code" href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">m_pRecordTimer</a> = QSharedPointer&lt;QTimer&gt;(<span class="keyword">new</span> QTimer(<span class="keyword">this</span>));</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;        <a class="code" href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">m_pRecordTimer</a>-&gt;setSingleShot(<span class="keyword">true</span>);</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        connect(<a class="code" href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">m_pRecordTimer</a>.data(), &amp;QTimer::timeout,</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a577fbaa287e78c90caa6a8123f9dddf0">BabyMEG::toggleRecordingFile</a>);</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    }</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#aba1217dca495868c5c63cbba248fef55">m_pBlinkingRecordButtonTimer</a>) {</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;        <a class="code" href="a05447.html#aba1217dca495868c5c63cbba248fef55">m_pBlinkingRecordButtonTimer</a> = QSharedPointer&lt;QTimer&gt;(<span class="keyword">new</span> QTimer(<span class="keyword">this</span>));</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;        connect(<a class="code" href="a05447.html#aba1217dca495868c5c63cbba248fef55">m_pBlinkingRecordButtonTimer</a>.data(), &amp;QTimer::timeout,</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a359f6d03d6c339785515ba84c39cec30">BabyMEG::changeRecordingButton</a>);</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    }</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a47eba658e206a44e8a2a30cb324cb7ff">m_pUpdateTimeInfoTimer</a>) {</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="a05447.html#a47eba658e206a44e8a2a30cb324cb7ff">m_pUpdateTimeInfoTimer</a> = QSharedPointer&lt;QTimer&gt;(<span class="keyword">new</span> QTimer(<span class="keyword">this</span>));</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        connect(<a class="code" href="a05447.html#a47eba658e206a44e8a2a30cb324cb7ff">m_pUpdateTimeInfoTimer</a>.data(), &amp;QTimer::timeout,</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#ac19d06c7a4a77de71d4f07727c7c1893">BabyMEG::onRecordingRemainingTimeChange</a>);</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    }</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;}</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno"><a class="line" href="a05447.html#a8258f87612d13cd8c2eeea26797033dd">  165</a></span>&#160;<a class="code" href="a05447.html#a8258f87612d13cd8c2eeea26797033dd">BabyMEG::~BabyMEG</a>()</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;{</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordflow">if</span>(this-&gt;isRunning())</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;        <a class="code" href="a05447.html#ad16e6b4a19f6b089ab3d95cf0c20eb48">stop</a>();</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>) {</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;isConnected()) {</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;            <a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;DisConnectBabyMEG();</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;        }</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    }</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;}</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;</div><div class="line"><a name="l00180"></a><span class="lineno"><a class="line" href="a05447.html#ad1c8d3cf383f7b9f26e6fb231879d1c1">  180</a></span>&#160;QSharedPointer&lt;IPlugin&gt; <a class="code" href="a05447.html#ad1c8d3cf383f7b9f26e6fb231879d1c1">BabyMEG::clone</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    QSharedPointer&lt;BabyMEG&gt; pBabyMEGClone(<span class="keyword">new</span> <a class="code" href="a05447.html#aab056584dd43354a277a04ebd6652071">BabyMEG</a>());</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> pBabyMEGClone;</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;}</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;</div><div class="line"><a name="l00189"></a><span class="lineno"><a class="line" href="a05447.html#a3e4f412556e3bcb0f1573126277803eb">  189</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a3e4f412556e3bcb0f1573126277803eb">BabyMEG::init</a>()</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;{</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">//BabyMEGData Path</span></div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    QString sBabyMEGDataPath = QDir::homePath() + <span class="stringliteral">&quot;/BabyMEGData&quot;</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keywordflow">if</span>(!QDir(sBabyMEGDataPath).exists()) {</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        QDir().mkdir(sBabyMEGDataPath);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="comment">//Test Project</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    QSettings settings;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    QString sCurrentProject = settings.value(QString(<span class="stringliteral">&quot;Plugin/%1/currentProject&quot;</span>).arg(<a class="code" href="a05447.html#aaf3981a2a7e178a827f18d7bb73f6520">getName</a>()), <span class="stringliteral">&quot;TestProject&quot;</span>).toString();</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;    <span class="keywordflow">if</span>(!QDir(sBabyMEGDataPath+<span class="stringliteral">&quot;/&quot;</span>+sCurrentProject).exists()) {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        QDir().mkdir(sBabyMEGDataPath+<span class="stringliteral">&quot;/&quot;</span>+sCurrentProject);</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    }</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="comment">//Test Subject</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    QString sCurrentSubject = settings.value(QString(<span class="stringliteral">&quot;Plugin/%1/currentSubject&quot;</span>).arg(<a class="code" href="a05447.html#aaf3981a2a7e178a827f18d7bb73f6520">getName</a>()), <span class="stringliteral">&quot;TestSubject&quot;</span>).toString();</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">if</span>(!QDir(sBabyMEGDataPath+<span class="stringliteral">&quot;/&quot;</span>+sCurrentProject+<span class="stringliteral">&quot;/&quot;</span>+sCurrentSubject).exists()) {</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        QDir().mkdir(sBabyMEGDataPath+<span class="stringliteral">&quot;/&quot;</span>+sCurrentProject+<span class="stringliteral">&quot;/&quot;</span>+sCurrentSubject);</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;    }</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a> = QSharedPointer&lt;ProjectSettingsView&gt;::create(sBabyMEGDataPath,</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                                                                         sCurrentProject,</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                                                         sCurrentSubject,</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                                         <span class="stringliteral">&quot;&quot;</span>);</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <a class="code" href="a05447.html#a8d500154de09d39aa899806c49f84281">m_sRecordFile</a> = <a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>-&gt;getCurrentFileName();</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    connect(<a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>.data(), &amp;ProjectSettingsView::timerChanged,</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a8867bb86e726ec6f1cf4ff12c08084f8">BabyMEG::setRecordingTimerChanged</a>);</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    connect(<a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>.data(), &amp;ProjectSettingsView::recordingTimerStateChanged,</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a200a3ad6e330f14259c39a50f9cbd070">BabyMEG::setRecordingTimerStateChanged</a>);</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>-&gt;hide();</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">//BabyMEG Inits</span></div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    <a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a> = QSharedPointer&lt;BabyMEGInfo&gt;(<span class="keyword">new</span> <a class="code" href="a05455.html">BabyMEGInfo</a>());</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    connect(<a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a>.data(), &amp;BabyMEGInfo::fiffInfoAvailable,</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#afd00c943e8963c81ffc76d75ea024566">BabyMEG::setFiffInfo</a>);</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    connect(<a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a>.data(), &amp;BabyMEGInfo::SendDataPackage,</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a15bd8d799c3165958facee58554722b8">BabyMEG::setFiffData</a>);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    connect(<a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a>.data(), &amp;BabyMEGInfo::SendCMDPackage,</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#ae3682db2e944a4f4320c8960fb49ca27">BabyMEG::setCMDData</a>);</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    connect(<a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a>.data(), &amp;BabyMEGInfo::GainInfoUpdate,</div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#abbb28d27f5a827890765dd0db5b50e9e">BabyMEG::setFiffGainInfo</a>);</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a> = QSharedPointer&lt;BabyMEGClient&gt;(<span class="keyword">new</span> <a class="code" href="a05451.html">BabyMEGClient</a>(6340,<span class="keyword">this</span>));</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    m_pMyClient-&gt;SetInfo(<a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a>);</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    m_pMyClient-&gt;start();</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <a class="code" href="a05447.html#a5721181e9693efa67c485afe040df9f7">m_pMyClientComm</a> = QSharedPointer&lt;BabyMEGClient&gt;(<span class="keyword">new</span> <a class="code" href="a05451.html">BabyMEGClient</a>(6341,<span class="keyword">this</span>));</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <a class="code" href="a05447.html#a5721181e9693efa67c485afe040df9f7">m_pMyClientComm</a>-&gt;SetInfo(<a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a>);</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <a class="code" href="a05447.html#a5721181e9693efa67c485afe040df9f7">m_pMyClientComm</a>-&gt;start();</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <a class="code" href="a05447.html#a5721181e9693efa67c485afe040df9f7">m_pMyClientComm</a>-&gt;SendCommandToBabyMEGShortConnection(<span class="stringliteral">&quot;INFO&quot;</span>);</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    m_pMyClient-&gt;ConnectToBabyMEG();</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="comment">//init channels when fiff info is available</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;    connect(<span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a1e9a69f1f248afef8887453cce354ee2">BabyMEG::fiffInfoAvailable</a>,</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;            <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a97f765c5ef4cb7564f68a634a22e0075">BabyMEG::initConnector</a>);</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;</div><div class="line"><a name="l00254"></a><span class="lineno"><a class="line" href="a05447.html#a6ffc6d15fad9d401555f0c7fdcad5b1e">  254</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a6ffc6d15fad9d401555f0c7fdcad5b1e">BabyMEG::unload</a>()</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;{</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;}</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;</div><div class="line"><a name="l00262"></a><span class="lineno"><a class="line" href="a05447.html#adb3d66cbcd312fc47e5dc9cfc89f8f48">  262</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#adb3d66cbcd312fc47e5dc9cfc89f8f48">BabyMEG::clear</a>()</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;{</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>.reset();</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <a class="code" href="a05447.html#a879e3426e3880df6c07dc8dbbb4f157d">m_iBufferSize</a> = -1;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;}</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;</div><div class="line"><a name="l00271"></a><span class="lineno"><a class="line" href="a05447.html#a1b7862e223df5e0aec874b03ab12902d">  271</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05447.html#a1b7862e223df5e0aec874b03ab12902d">BabyMEG::start</a>()</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;{</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="comment">//    //Check if the thread is already or still running. This can happen if the start button is pressed immediately after the stop button was pressed. In this case the stopping process is not finished yet but the start process is initiated.</span></div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">//    if(this-&gt;isRunning())</span></div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">//        QThread::wait();</span></div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>)</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="a05447.html#a97f765c5ef4cb7564f68a634a22e0075">initConnector</a>();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    <span class="comment">// Start threads</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;    <a class="code" href="a05447.html#af9a5d0b724d9281c73ec86170d7fc55c">m_bIsRunning</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;isConnected())</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;ConnectToBabyMEG();</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <span class="comment">// Start threads</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    QThread::start();</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div><div class="line"><a name="l00294"></a><span class="lineno"><a class="line" href="a05447.html#ad16e6b4a19f6b089ab3d95cf0c20eb48">  294</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05447.html#ad16e6b4a19f6b089ab3d95cf0c20eb48">BabyMEG::stop</a>()</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;{</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;isConnected())</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;        <a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;DisConnectBabyMEG();</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <a class="code" href="a05447.html#af9a5d0b724d9281c73ec86170d7fc55c">m_bIsRunning</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">//In case the semaphore blocks the thread -&gt; Release the QSemaphore and let it exit from the pop function (acquire statement)</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <a class="code" href="a05447.html#aa78e13324f63c3129d4805b06afab260">m_pRawMatrixBuffer</a>-&gt;releaseFromPop();</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">//Clear Buffers</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <a class="code" href="a05447.html#aa78e13324f63c3129d4805b06afab260">m_pRawMatrixBuffer</a>-&gt;clear();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>) {</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;        <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>-&gt;hide();</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;}</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;</div><div class="line"><a name="l00317"></a><span class="lineno"><a class="line" href="a05447.html#a850b3204e3e736dc4d94a77cabc7a3e9">  317</a></span>&#160;<a class="code" href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5d">IPlugin::PluginType</a> <a class="code" href="a05447.html#a850b3204e3e736dc4d94a77cabc7a3e9">BabyMEG::getType</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5da86f46a40444d051a5b7ace338f27dedd">_ISensor</a>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;}</div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div><div class="line"><a name="l00325"></a><span class="lineno"><a class="line" href="a05447.html#aaf3981a2a7e178a827f18d7bb73f6520">  325</a></span>&#160;QString <a class="code" href="a05447.html#aaf3981a2a7e178a827f18d7bb73f6520">BabyMEG::getName</a>()<span class="keyword"> const</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <span class="keywordflow">return</span> <span class="stringliteral">&quot;BabyMEG&quot;</span>;</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;</div><div class="line"><a name="l00333"></a><span class="lineno"><a class="line" href="a05447.html#a069b5c2de4a048cbac1e66474b00eae2">  333</a></span>&#160;QWidget* <a class="code" href="a05447.html#a069b5c2de4a048cbac1e66474b00eae2">BabyMEG::setupWidget</a>()</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;{</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;isConnected())</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        <a class="code" href="a05447.html#a8c1f7c961a824697db226d83b40e4104">m_pMyClient</a>-&gt;ConnectToBabyMEG();</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    <a class="code" href="a05463.html">BabyMEGSetupWidget</a>* widget = <span class="keyword">new</span> <a class="code" href="a05463.html">BabyMEGSetupWidget</a>(<span class="keyword">this</span>);<span class="comment">//widget is later distroyed by CentralWidget - so it has to be created everytime new</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;</div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;    <span class="keywordflow">return</span> widget;</div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00346"></a><span class="lineno"><a class="line" href="a05447.html#a9d848a6d26692efd6af31ed2b0276d01">  346</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a9d848a6d26692efd6af31ed2b0276d01">BabyMEG::run</a>()</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;{</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    MatrixXf matValue;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;    qint32 size = 0;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="a05447.html#af9a5d0b724d9281c73ec86170d7fc55c">m_bIsRunning</a>) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="a05447.html#aa78e13324f63c3129d4805b06afab260">m_pRawMatrixBuffer</a>) {</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;            <span class="comment">//pop matrix</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;            matValue = <a class="code" href="a05447.html#aa78e13324f63c3129d4805b06afab260">m_pRawMatrixBuffer</a>-&gt;pop();</div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;            <span class="comment">//Update HPI data (for single and continous HPI fitting)</span></div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;            <a class="code" href="a05447.html#a95379691d236353966f711728dd36562">updateHPI</a>(matValue);</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;            <span class="comment">//Do continous HPI fitting and write result to data block</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a504488fab83e1d298305f858dbbc9421">m_bDoContinousHPI</a>) {</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                <a class="code" href="a05447.html#a43ec10e9112180e21d9cc32334750a9c">doContinousHPI</a>(matValue);</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;            }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            <span class="comment">//Create digital trigger information</span></div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;            <a class="code" href="a05447.html#a0c10d24200885af83903b759d455b399">createDigTrig</a>(matValue);</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;            <span class="comment">//Write raw data to fif file</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a9b624fc2083d63222838b6b4765ead3f">m_bWriteToFile</a>) {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                size += matValue.rows()*matValue.cols() * 4;</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                <span class="keywordflow">if</span>(size &gt; MAX_DATA_LEN) {</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                    size = 0;</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                    this-&gt;<a class="code" href="a05447.html#aad52ea2850b45ea866a3f2ad902abe8d">splitRecordingFile</a>();</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                }</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                <a class="code" href="a05447.html#a2b314fd5fc1febef1d437a5b4d4636e6">m_mutex</a>.lock();</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;write_raw_buffer(matValue.cast&lt;<span class="keywordtype">double</span>&gt;());</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                <a class="code" href="a05447.html#a2b314fd5fc1febef1d437a5b4d4636e6">m_mutex</a>.unlock();</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                size = 0;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;            }</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>) {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                <a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>-&gt;<a class="code" href="a05391.html#aceae87f721c31ca112ce126fcd522685">data</a>()-&gt;setValue(this-&gt;<a class="code" href="a05447.html#afb54b3eb1e92864c797dadc415696ef2">calibrate</a>(matValue));</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;            }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;    }</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;    <span class="comment">//Close the fif output stream</span></div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a9b624fc2083d63222838b6b4765ead3f">m_bWriteToFile</a>) {</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        this-&gt;<a class="code" href="a05447.html#a577fbaa287e78c90caa6a8123f9dddf0">toggleRecordingFile</a>();</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;    }</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;}</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;</div><div class="line"><a name="l00398"></a><span class="lineno"><a class="line" href="a05447.html#a97f765c5ef4cb7564f68a634a22e0075">  398</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a97f765c5ef4cb7564f68a634a22e0075">BabyMEG::initConnector</a>()</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;{</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>)</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;    {</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;        <a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a> = <a class="code" href="a05391.html">PluginOutputData&lt;RealTimeMultiSampleArray&gt;::create</a>(<span class="keyword">this</span>, <span class="stringliteral">&quot;BabyMEG Output&quot;</span>, <span class="stringliteral">&quot;BabyMEG&quot;</span>);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;        <a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>-&gt;<a class="code" href="a05391.html#aceae87f721c31ca112ce126fcd522685">data</a>()-&gt;setName(this-&gt;<a class="code" href="a05447.html#aaf3981a2a7e178a827f18d7bb73f6520">getName</a>());<span class="comment">//Provide name to auto store widget settings</span></div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;</div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;        <a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>-&gt;<a class="code" href="a05391.html#aceae87f721c31ca112ce126fcd522685">data</a>()-&gt;initFromFiffInfo(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>);</div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;        <a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>-&gt;<a class="code" href="a05391.html#aceae87f721c31ca112ce126fcd522685">data</a>()-&gt;setMultiArraySize(1);</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;        <a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>-&gt;<a class="code" href="a05391.html#aceae87f721c31ca112ce126fcd522685">data</a>()-&gt;setSamplingRate(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;sfreq);</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>-&gt;<a class="code" href="a05391.html#aceae87f721c31ca112ce126fcd522685">data</a>()-&gt;setVisibility(<span class="keyword">true</span>);</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;        <a class="code" href="a05351.html#a3d20989cd2175fa71bf77ceb0c99f353">m_outputConnectors</a>.append(<a class="code" href="a05447.html#a76e2459d79515db87af40aee2b07c023">m_pRTMSABabyMEG</a>);</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        <span class="comment">//Look for trigger channels and initialise detected trigger map</span></div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG001&quot;</span>));</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG002&quot;</span>));</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG003&quot;</span>));</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG004&quot;</span>));</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG005&quot;</span>));</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG006&quot;</span>));</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG007&quot;</span>));</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>.append(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;TRG008&quot;</span>));</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;}</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;</div><div class="line"><a name="l00429"></a><span class="lineno"><a class="line" href="a05447.html#afd00c943e8963c81ffc76d75ea024566">  429</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#afd00c943e8963c81ffc76d75ea024566">BabyMEG::setFiffInfo</a>(<span class="keyword">const</span> FiffInfo&amp; p_FiffInfo)</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;{</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;    <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a> = QSharedPointer&lt;FiffInfo&gt;(<span class="keyword">new</span> FiffInfo(p_FiffInfo));</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a250ab5d9748f2991319dc0a26c4c7c47">readProjectors</a>())</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;    {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Not able to read projectors&quot;</span>;</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;    }</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a8d83e282b962a897aabee2d67561443c">readCompensators</a>())</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    {</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Not able to read compensators&quot;</span>;</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;    }</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#ae3d929b939f9f5581b3e4b4550da6fd6">readBadChannels</a>())</div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;    {</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;        qDebug() &lt;&lt; <span class="stringliteral">&quot;Not able to read bad channels&quot;</span>;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;    }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;    <a class="code" href="a05447.html#a879e3426e3880df6c07dc8dbbb4f157d">m_iBufferSize</a> = <a class="code" href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">m_pInfo</a>-&gt;dataLength;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="comment">//   Add the calibration factors</span></div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;    <a class="code" href="a05447.html#ae12194cc630a6d7f6e0c9c3efaba9c03">m_cals</a> = RowVectorXd(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan);</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;    <a class="code" href="a05447.html#ae12194cc630a6d7f6e0c9c3efaba9c03">m_cals</a>.setZero();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;    <span class="keywordflow">for</span> (qint32 k = 0; k &lt; <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan; ++k)</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;        <a class="code" href="a05447.html#ae12194cc630a6d7f6e0c9c3efaba9c03">m_cals</a>[k] = <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;chs[k].range*<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;chs[k].cal;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;    <span class="comment">//  Initialize the data and calibration vector</span></div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;    <span class="keyword">typedef</span> Eigen::Triplet&lt;double&gt; T;</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;    std::vector&lt;T&gt; tripletList;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;    tripletList.reserve(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan);</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordflow">for</span>(qint32 i = 0; i &lt; <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan; ++i)</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;        tripletList.push_back(T(i, i, this-&gt;<a class="code" href="a05447.html#ae12194cc630a6d7f6e0c9c3efaba9c03">m_cals</a>[i]));</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;    <a class="code" href="a05447.html#a1f86611b63ba74601f22ae14630e9394">m_sparseMatCals</a> = SparseMatrix&lt;double&gt;(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan, <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan);</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;    <a class="code" href="a05447.html#a1f86611b63ba74601f22ae14630e9394">m_sparseMatCals</a>.setFromTriplets(tripletList.begin(), tripletList.end());</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;    emit <a class="code" href="a05447.html#a1e9a69f1f248afef8887453cce354ee2">fiffInfoAvailable</a>();</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;}</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno"><a class="line" href="a05447.html#a15bd8d799c3165958facee58554722b8">  476</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a15bd8d799c3165958facee58554722b8">BabyMEG::setFiffData</a>(QByteArray data)</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;{</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    <span class="comment">//get the first byte -- the data format</span></div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;    <span class="keywordtype">int</span> dformat = data.left(1).toInt();</div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;    data.remove(0,1);</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;    qint32 rows = <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;    qint32 cols = (data.size()/dformat)/rows;</div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;[BabyMEG] Matrix &quot;</span> &lt;&lt; rows &lt;&lt; <span class="stringliteral">&quot;x&quot;</span> &lt;&lt; cols &lt;&lt; <span class="stringliteral">&quot; [Data bytes:&quot;</span> &lt;&lt; dformat &lt;&lt; <span class="stringliteral">&quot;]&quot;</span>;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;    MatrixXf rawData(Map&lt;MatrixXf&gt;( (<span class="keywordtype">float</span>*)data.data(),rows, cols ));</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;    <span class="keywordflow">for</span>(qint32 i = 0; i &lt; rows*cols; ++i)</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;        IOUtils::swap_floatp(rawData.data()+i);</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#af9a5d0b724d9281c73ec86170d7fc55c">m_bIsRunning</a>)</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    {</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#aa78e13324f63c3129d4805b06afab260">m_pRawMatrixBuffer</a>)</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;            <a class="code" href="a05447.html#aa78e13324f63c3129d4805b06afab260">m_pRawMatrixBuffer</a> = <a class="code" href="a04783.html#a8cf538a5e32c7a7173a7e78229d297aa">CircularMatrixBuffer&lt;float&gt;::SPtr</a>(<span class="keyword">new</span> <a class="code" href="a04783.html">CircularMatrixBuffer&lt;float&gt;</a>(40, rows, cols));</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;        <a class="code" href="a05447.html#aa78e13324f63c3129d4805b06afab260">m_pRawMatrixBuffer</a>-&gt;push(&amp;rawData);</div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    }</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;    emit <a class="code" href="a05447.html#a90fc395f7870cae8cc795fba72927188">dataToSquidCtrlGUI</a>(rawData);</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;</div><div class="line"><a name="l00507"></a><span class="lineno"><a class="line" href="a05447.html#ae3682db2e944a4f4320c8960fb49ca27">  507</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#ae3682db2e944a4f4320c8960fb49ca27">BabyMEG::setCMDData</a>(QByteArray DATA)</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;{</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;------&quot;</span>&lt;&lt;DATA;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;<span class="comment">//    m_commandManager[&quot;FLL&quot;].reply(DATA);</span></div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;    emit <a class="code" href="a05447.html#a2b7a704380b2128d2dde3d9b68393f6a">sendCMDDataToSQUIDControl</a>(DATA);</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;Data has been received.&quot;</span>;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;}</div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno"><a class="line" href="a05447.html#abbb28d27f5a827890765dd0db5b50e9e">  518</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#abbb28d27f5a827890765dd0db5b50e9e">BabyMEG::setFiffGainInfo</a>(QStringList GainInfo)</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;{</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>) {</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;        QMessageBox msgBox;</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        msgBox.setText(<span class="stringliteral">&quot;FiffInfo missing!&quot;</span>);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;        msgBox.exec();</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;        <span class="comment">//set up the gain info</span></div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;        qDebug()&lt;&lt;<span class="stringliteral">&quot;Set Gain Info&quot;</span>;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;        <span class="keywordflow">for</span>(qint32 i = 0; i &lt; <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan; i++) {</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;            <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;chs[i].range = 1.0f/GainInfo.at(i).toFloat();<span class="comment">//1; // set gain</span></div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;            <a class="code" href="a05447.html#ae12194cc630a6d7f6e0c9c3efaba9c03">m_cals</a>[i] = <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;chs[i].range*<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;chs[i].cal;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;            <span class="comment">//qDebug()&lt;&lt;i&lt;&lt;&quot;=&quot;&lt;&lt;m_pFiffInfo-&gt;chs[i].ch_name&lt;&lt;&quot;,&quot;&lt;&lt;m_pFiffInfo-&gt;chs[i].range;</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        }</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        <span class="comment">// Initialize the data and calibration vector</span></div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keyword">typedef</span> Eigen::Triplet&lt;double&gt; T;</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;        std::vector&lt;T&gt; tripletList;</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;        tripletList.reserve(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan);</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;        <span class="keywordflow">for</span>(qint32 i = 0; i &lt; <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan; ++i) {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;            tripletList.push_back(T(i, i, this-&gt;<a class="code" href="a05447.html#ae12194cc630a6d7f6e0c9c3efaba9c03">m_cals</a>[i]));</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;        }</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        <a class="code" href="a05447.html#a1f86611b63ba74601f22ae14630e9394">m_sparseMatCals</a> = SparseMatrix&lt;double&gt;(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan, <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <a class="code" href="a05447.html#a1f86611b63ba74601f22ae14630e9394">m_sparseMatCals</a>.setFromTriplets(tripletList.begin(), tripletList.end());</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;    }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;}</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;</div><div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="a05447.html#a9eca162405d474c67f9aaf9366a853e1">  551</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a9eca162405d474c67f9aaf9366a853e1">BabyMEG::comFLL</a>(QString t_sFLLControlCommand)</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;{</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;    qDebug()&lt;&lt;<span class="stringliteral">&quot;FLL commands&quot;</span>;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;    qDebug() &lt;&lt; <span class="stringliteral">&quot;BabyMeg Received&quot;</span> &lt;&lt; t_sFLLControlCommand;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;    <span class="keywordtype">int</span> strlen = t_sFLLControlCommand.size();</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;    QByteArray Scmd = <a class="code" href="a05447.html#a5721181e9693efa67c485afe040df9f7">m_pMyClientComm</a>-&gt;MGH_LM_Int2Byte(strlen);</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;    QByteArray SC = QByteArray(<span class="stringliteral">&quot;COMS&quot;</span>)+Scmd;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;    SC.append(t_sFLLControlCommand);</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;    <a class="code" href="a05447.html#a5721181e9693efa67c485afe040df9f7">m_pMyClientComm</a>-&gt;SendCommandToBabyMEGShortConnection(SC);</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;}</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno"><a class="line" href="a05447.html#a72e4651b25bd44df78c7b2b9e8d7aecd">  566</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a72e4651b25bd44df78c7b2b9e8d7aecd">BabyMEG::updateFiffInfo</a>()</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;{</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;    <span class="comment">// read gain info and save them to the m_pFiffInfo.range</span></div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;    <a class="code" href="a05447.html#a5721181e9693efa67c485afe040df9f7">m_pMyClientComm</a>-&gt;SendCommandToBabyMEGShortConnection(<span class="stringliteral">&quot;INFG&quot;</span>);</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;    <span class="comment">//sleep(0.5);</span></div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">//m_pActionRecordFile-&gt;setEnabled(true);</span></div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;}</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;</div><div class="line"><a name="l00580"></a><span class="lineno"><a class="line" href="a05447.html#a778de6e67484264f0aa432d079bbe827">  580</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a778de6e67484264f0aa432d079bbe827">BabyMEG::showHPIDialog</a>()</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;{</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>) {</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;        QMessageBox msgBox;</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;        msgBox.setText(<span class="stringliteral">&quot;FiffInfo missing!&quot;</span>);</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;        msgBox.exec();</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>) {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;            <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a> = QSharedPointer&lt;HpiView&gt;(<span class="keyword">new</span> <a class="code" href="a03783.html">HpiView</a>(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>));</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;            connect(<a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>.data(), &amp;HpiView::continousHPIToggled,</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                    <span class="keyword">this</span>, &amp;<a class="code" href="a05447.html#a3d8337303d19780536f6a60e0d1509c6">BabyMEG::onContinousHPIToggled</a>);</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;        }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>-&gt;isVisible()) {</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;            <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>-&gt;show();</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;            <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>-&gt;raise();</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;        }</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;    }</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;}</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;</div><div class="line"><a name="l00604"></a><span class="lineno"><a class="line" href="a05447.html#a95379691d236353966f711728dd36562">  604</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a95379691d236353966f711728dd36562">BabyMEG::updateHPI</a>(<span class="keyword">const</span> MatrixXf&amp; matData)</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;{</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a> &amp;&amp; <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>) {</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>-&gt;setData(this-&gt;<a class="code" href="a05447.html#afb54b3eb1e92864c797dadc415696ef2">calibrate</a>(matData));</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;    }</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;}</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;</div><div class="line"><a name="l00614"></a><span class="lineno"><a class="line" href="a05447.html#a43ec10e9112180e21d9cc32334750a9c">  614</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a43ec10e9112180e21d9cc32334750a9c">BabyMEG::doContinousHPI</a>(MatrixXf&amp; matData)</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;{</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;    <span class="comment">//This only works with babyMEG HPI channels 400 ... 407</span></div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a> &amp;&amp; <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a> &amp;&amp; matData.rows() &gt;= 407) {</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="comment">//if(m_pHPIWidget-&gt;wasLastFitOk()) {</span></div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;            <span class="comment">// Load device to head transformation matrix from Fiff info</span></div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;            QMatrix3x3 rot;</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ir = 0; ir &lt; 3; ir++) {</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;                <span class="keywordflow">for</span>(<span class="keywordtype">int</span> ic = 0; ic &lt; 3; ic++) {</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;                    rot(ir,ic) = <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;dev_head_t.trans(ir,ic);</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                }</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;            }</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;            QQuaternion quatHPI = QQuaternion::fromRotationMatrix(rot);</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;            <span class="comment">// Write goodness of fit (GOF)to HPI Ch #7</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;<span class="comment">//            float dpfitError = 0.0;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;<span class="comment">//            float GOF = 1 - dpfitError;</span></div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;            QVector&lt;double&gt; vGof = <a class="code" href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">m_pHPIWidget</a>-&gt;getGOF();</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;            <span class="keywordtype">float</span> GOF = 0.0f;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;            <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i &lt; vGof.size(); ++i) {</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;                GOF += vGof.at(i);</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;            }</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;            GOF = GOF / vGof.size();</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;            <span class="comment">// Write rotation quaternion to HPI Ch #1~3</span></div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;            matData.row(401) = MatrixXf::Constant(1,matData.cols(), quatHPI.x());</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;            matData.row(402) = MatrixXf::Constant(1,matData.cols(), quatHPI.y());</div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;            matData.row(403) = MatrixXf::Constant(1,matData.cols(), quatHPI.z());</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;            <span class="comment">// Write translation vector to HPI Ch #4~6</span></div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;            matData.row(404) = MatrixXf::Constant(1,matData.cols(), <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;dev_head_t.trans(0,3));</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;            matData.row(405) = MatrixXf::Constant(1,matData.cols(), <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;dev_head_t.trans(1,3));</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;            matData.row(406) = MatrixXf::Constant(1,matData.cols(), <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;dev_head_t.trans(2,3));</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;</div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;            <span class="comment">// Write GOF to HPI Ch #7</span></div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;            matData.row(407) = MatrixXf::Constant(1,matData.cols(), GOF);</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;        <span class="comment">//}</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;    }</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;}</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;</div><div class="line"><a name="l00659"></a><span class="lineno"><a class="line" href="a05447.html#a3d8337303d19780536f6a60e0d1509c6">  659</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a3d8337303d19780536f6a60e0d1509c6">BabyMEG::onContinousHPIToggled</a>(<span class="keywordtype">bool</span> bDoContinousHPI)</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;{</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;    <a class="code" href="a05447.html#a504488fab83e1d298305f858dbbc9421">m_bDoContinousHPI</a> = bDoContinousHPI;</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;</div><div class="line"><a name="l00667"></a><span class="lineno"><a class="line" href="a05447.html#a8867bb86e726ec6f1cf4ff12c08084f8">  667</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a8867bb86e726ec6f1cf4ff12c08084f8">BabyMEG::setRecordingTimerChanged</a>(<span class="keywordtype">int</span> timeMSecs)</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;{</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    <span class="comment">//If the recording time is changed during the recording, change the timer</span></div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a9b624fc2083d63222838b6b4765ead3f">m_bWriteToFile</a>)</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        <a class="code" href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">m_pRecordTimer</a>-&gt;setInterval(timeMSecs-<a class="code" href="a05447.html#abf87304596d7eb4355caf0ec3a452357">m_recordingStartedTime</a>.elapsed());</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="a05447.html#a142c274c27cdc64f9f44ff71e6961c5a">m_iRecordingMSeconds</a> = timeMSecs;</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;}</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;</div><div class="line"><a name="l00679"></a><span class="lineno"><a class="line" href="a05447.html#a200a3ad6e330f14259c39a50f9cbd070">  679</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a200a3ad6e330f14259c39a50f9cbd070">BabyMEG::setRecordingTimerStateChanged</a>(<span class="keywordtype">bool</span> state)</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;{</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;    <a class="code" href="a05447.html#a78cd278facdd5bc02e3ed46952e413bc">m_bUseRecordTimer</a> = state;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;}</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;</div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;</div><div class="line"><a name="l00687"></a><span class="lineno"><a class="line" href="a05447.html#a1dcbeac2b831f3c7ed2f775d7908949b">  687</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a1dcbeac2b831f3c7ed2f775d7908949b">BabyMEG::setFileName</a>(<span class="keyword">const</span> QString&amp; sFileName)</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;{</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <a class="code" href="a05447.html#a8d500154de09d39aa899806c49f84281">m_sRecordFile</a> = sFileName;</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;}</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;</div><div class="line"><a name="l00695"></a><span class="lineno"><a class="line" href="a05447.html#a5d7135514488fbc26d50476ac3cfd14c">  695</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a5d7135514488fbc26d50476ac3cfd14c">BabyMEG::showProjectDialog</a>()</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;{</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>) {</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;        <a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>-&gt;show();</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    }</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;}</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;</div><div class="line"><a name="l00705"></a><span class="lineno"><a class="line" href="a05447.html#ab0224f3005c95a8c49bf765f8a9c14e8">  705</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#ab0224f3005c95a8c49bf765f8a9c14e8">BabyMEG::showSqdCtrlDialog</a>()</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;{</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;    <span class="comment">// Start Squid control widget</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a2cfd0e68df94405a5196918e2dcd34ab">m_pSQUIDCtrlDlg</a>) {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;        <a class="code" href="a05447.html#a2cfd0e68df94405a5196918e2dcd34ab">m_pSQUIDCtrlDlg</a> = QSharedPointer&lt;BabyMEGSQUIDControlDgl&gt;(<span class="keyword">new</span> <a class="code" href="a05479.html">BabyMEGSQUIDControlDgl</a>(<span class="keyword">this</span>));</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a2cfd0e68df94405a5196918e2dcd34ab">m_pSQUIDCtrlDlg</a>-&gt;isVisible()) {</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        <a class="code" href="a05447.html#a2cfd0e68df94405a5196918e2dcd34ab">m_pSQUIDCtrlDlg</a>-&gt;show();</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        <a class="code" href="a05447.html#a2cfd0e68df94405a5196918e2dcd34ab">m_pSQUIDCtrlDlg</a>-&gt;raise();</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;        <a class="code" href="a05447.html#a2cfd0e68df94405a5196918e2dcd34ab">m_pSQUIDCtrlDlg</a>-&gt;Init();</div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;}</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;</div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;</div><div class="line"><a name="l00722"></a><span class="lineno"><a class="line" href="a05447.html#aad52ea2850b45ea866a3f2ad902abe8d">  722</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#aad52ea2850b45ea866a3f2ad902abe8d">BabyMEG::splitRecordingFile</a>()</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;{</div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;    <span class="comment">//qDebug() &lt;&lt; &quot;Split recording file&quot;;</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;    ++<a class="code" href="a05447.html#aef6ee09fc3f2ffc4f6c40f97bcdea6d0">m_iSplitCount</a>;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;    QString nextFileName = <a class="code" href="a05447.html#a8d500154de09d39aa899806c49f84281">m_sRecordFile</a>.remove(<span class="stringliteral">&quot;_raw.fif&quot;</span>);</div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;    nextFileName += QString(<span class="stringliteral">&quot;-%1_raw.fif&quot;</span>).arg(<a class="code" href="a05447.html#aef6ee09fc3f2ffc4f6c40f97bcdea6d0">m_iSplitCount</a>);</div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;    <span class="comment">//Write the link to the next file</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;    qint32 data;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;start_block(<a class="code" href="a00893.html#a03bc7495a53759399050c03521bebccd">FIFFB_REF</a>);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;    data = FIFFV_ROLE_NEXT_FILE;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;write_int(FIFF_REF_ROLE,&amp;data);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;write_string(FIFF_REF_FILE_NAME, nextFileName);</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;write_id(FIFF_REF_FILE_ID);<span class="comment">//ToDo meas_id</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;    data = <a class="code" href="a05447.html#aef6ee09fc3f2ffc4f6c40f97bcdea6d0">m_iSplitCount</a> - 1;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;write_int(FIFF_REF_FILE_NUM, &amp;data);</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;end_block(<a class="code" href="a00893.html#a03bc7495a53759399050c03521bebccd">FIFFB_REF</a>);</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;    <span class="comment">//finish file</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;finish_writing_raw();</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;    <span class="comment">//start next file</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;    <a class="code" href="a05447.html#a8a83a5508a98b7ca7d39f1840b743551">m_qFileOut</a>.setFileName(nextFileName);</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;    RowVectorXd cals;</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;    MatrixXi sel;</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a> = FiffStream::start_writing_raw(<a class="code" href="a05447.html#a8a83a5508a98b7ca7d39f1840b743551">m_qFileOut</a>,</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;                                              *<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>,</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;                                              cals,</div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;                                              sel,</div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;                                              <span class="keyword">false</span>);</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    fiff_int_t first = 0;</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;    <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;write_int(<a class="code" href="a00893.html#a591e66b9fcd3973990a7ce37b5c04874">FIFF_FIRST_SAMPLE</a>, &amp;first);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;}</div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;</div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;</div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;</div><div class="line"><a name="l00759"></a><span class="lineno"><a class="line" href="a05447.html#a577fbaa287e78c90caa6a8123f9dddf0">  759</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a577fbaa287e78c90caa6a8123f9dddf0">BabyMEG::toggleRecordingFile</a>()</div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;{</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;    <span class="comment">//Setup writing to file</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a9b624fc2083d63222838b6b4765ead3f">m_bWriteToFile</a>) {</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;        <a class="code" href="a05447.html#a2b314fd5fc1febef1d437a5b4d4636e6">m_mutex</a>.lock();</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;        <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;finish_writing_raw();</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;        <a class="code" href="a05447.html#a2b314fd5fc1febef1d437a5b4d4636e6">m_mutex</a>.unlock();</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        <a class="code" href="a05447.html#a9b624fc2083d63222838b6b4765ead3f">m_bWriteToFile</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;        <a class="code" href="a05447.html#aef6ee09fc3f2ffc4f6c40f97bcdea6d0">m_iSplitCount</a> = 0;</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;        <span class="comment">//Stop record timer</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;        <a class="code" href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">m_pRecordTimer</a>-&gt;stop();</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        <a class="code" href="a05447.html#a47eba658e206a44e8a2a30cb324cb7ff">m_pUpdateTimeInfoTimer</a>-&gt;stop();</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        <a class="code" href="a05447.html#aba1217dca495868c5c63cbba248fef55">m_pBlinkingRecordButtonTimer</a>-&gt;stop();</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;        <a class="code" href="a05447.html#aae8328637bd51c976a42e35cf4e17336">m_pActionRecordFile</a>-&gt;setIcon(QIcon(<span class="stringliteral">&quot;:/images/record.png&quot;</span>));</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;        <a class="code" href="a05447.html#aef6ee09fc3f2ffc4f6c40f97bcdea6d0">m_iSplitCount</a> = 0;</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>) {</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;            QMessageBox msgBox;</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;            msgBox.setText(<span class="stringliteral">&quot;FiffInfo missing!&quot;</span>);</div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;            msgBox.setWindowFlags(Qt::WindowStaysOnTopHint);</div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;            msgBox.exec();</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;            <span class="keywordflow">return</span>;</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;        }</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;dev_head_t.trans.isIdentity()) {</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;            QMessageBox msgBox;</div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;            msgBox.setText(<span class="stringliteral">&quot;It seems that no HPI fitting was performed. This is your last chance!&quot;</span>);</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;            msgBox.setInformativeText(<span class="stringliteral">&quot; Do you want to continue without HPI fitting?&quot;</span>);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;            msgBox.setStandardButtons(QMessageBox::Yes | QMessageBox::No);</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;            msgBox.setWindowFlags(Qt::WindowStaysOnTopHint);</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;            <span class="keywordtype">int</span> ret = msgBox.exec();</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;            <span class="keywordflow">if</span>(ret == QMessageBox::No)</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;        }</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;        <span class="comment">//Initiate the stream for writing to the fif file</span></div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>) {</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;            <a class="code" href="a05447.html#a8d500154de09d39aa899806c49f84281">m_sRecordFile</a> = <a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>-&gt;getCurrentFileName();</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        }</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <a class="code" href="a05447.html#a8a83a5508a98b7ca7d39f1840b743551">m_qFileOut</a>.setFileName(<a class="code" href="a05447.html#a8d500154de09d39aa899806c49f84281">m_sRecordFile</a>);</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a8a83a5508a98b7ca7d39f1840b743551">m_qFileOut</a>.exists()) {</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;            QMessageBox msgBox;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;            msgBox.setText(<span class="stringliteral">&quot;The file you want to write already exists.&quot;</span>);</div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;            msgBox.setInformativeText(<span class="stringliteral">&quot;Do you want to overwrite this file?&quot;</span>);</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;            msgBox.setStandardButtons(QMessageBox::Yes | QMessageBox::No);</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;            msgBox.setWindowFlags(Qt::WindowStaysOnTopHint);</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;            <span class="keywordtype">int</span> ret = msgBox.exec();</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;            <span class="keywordflow">if</span>(ret == QMessageBox::No) {</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;                <span class="keywordflow">return</span>;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;            }</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        }</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        <span class="comment">//Set all projectors to zero before writing to file because we always write the raw data</span></div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt;<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;projs.size(); i++) {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;            <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;projs[i].active = <span class="keyword">false</span>;</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        }</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;        <span class="comment">//Start/Prepare writing process. Actual writing is done in run() method.</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;        <a class="code" href="a05447.html#a2b314fd5fc1febef1d437a5b4d4636e6">m_mutex</a>.lock();</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        RowVectorXd cals;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;        <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a> = FiffStream::start_writing_raw(<a class="code" href="a05447.html#a8a83a5508a98b7ca7d39f1840b743551">m_qFileOut</a>,</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;                                                  *<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>,</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;                                                  cals);</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        fiff_int_t first = 0;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;        <a class="code" href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">m_pOutfid</a>-&gt;write_int(<a class="code" href="a00893.html#a591e66b9fcd3973990a7ce37b5c04874">FIFF_FIRST_SAMPLE</a>, &amp;first);</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <a class="code" href="a05447.html#a2b314fd5fc1febef1d437a5b4d4636e6">m_mutex</a>.unlock();</div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="a05447.html#a9b624fc2083d63222838b6b4765ead3f">m_bWriteToFile</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="comment">//Start timers for record button blinking, recording timer and updating the elapsed time in the proj widget</span></div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <a class="code" href="a05447.html#aba1217dca495868c5c63cbba248fef55">m_pBlinkingRecordButtonTimer</a>-&gt;start(500);</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <a class="code" href="a05447.html#abf87304596d7eb4355caf0ec3a452357">m_recordingStartedTime</a>.restart();</div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;        <a class="code" href="a05447.html#a47eba658e206a44e8a2a30cb324cb7ff">m_pUpdateTimeInfoTimer</a>-&gt;start(1000);</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a78cd278facdd5bc02e3ed46952e413bc">m_bUseRecordTimer</a>) {</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;            <a class="code" href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">m_pRecordTimer</a>-&gt;start(<a class="code" href="a05447.html#a142c274c27cdc64f9f44ff71e6961c5a">m_iRecordingMSeconds</a>);</div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;        }</div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;    }</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;}</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;</div><div class="line"><a name="l00848"></a><span class="lineno"><a class="line" href="a05447.html#a0c10d24200885af83903b759d455b399">  848</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a0c10d24200885af83903b759d455b399">BabyMEG::createDigTrig</a>(MatrixXf&amp; data)</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;{</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;    <span class="comment">//Look for triggers in all trigger channels</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;    <span class="comment">//m_qMapDetectedTrigger = DetectTrigger::detectTriggerFlanksMax(data.at(b), m_lTriggerChannelIndices, m_iCurrentSample-nCol, m_dTriggerThreshold, true);</span></div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;    QMap&lt;int,QList&lt;QPair&lt;int,double&gt; &gt; &gt; qMapDetectedTrigger = DetectTrigger::detectTriggerFlanksGrad(data.cast&lt;<span class="keywordtype">double</span>&gt;(),</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;                                                                                                      <a class="code" href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">m_lTriggerChannelIndices</a>,</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;                                                                                                      0,</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;                                                                                                      1.0,</div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;                                                                                                      <span class="keyword">false</span>,</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;                                                                                                      <span class="stringliteral">&quot;Rising&quot;</span>,</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;                                                                                                      400);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;    <span class="comment">//Combine and write results into data block&#39;s digital trigger channel</span></div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;    QMapIterator&lt;int,QList&lt;QPair&lt;int,double&gt; &gt; &gt; i(qMapDetectedTrigger);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;    <span class="keywordtype">int</span> counter = 0;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;    <span class="keywordtype">int</span> idxDigTrig = <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;ch_names.indexOf(<span class="stringliteral">&quot;DTRG01&quot;</span>);</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;    <span class="keywordflow">while</span> (i.hasNext()) {</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        i.next();</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        QList&lt;QPair&lt;int,double&gt; &gt; lDetectedTriggers = i.value();</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> k = 0; k &lt; lDetectedTriggers.size(); ++k) {</div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;            <span class="keywordflow">if</span>(lDetectedTriggers.at(k).first &lt; data.cols() &amp;&amp; lDetectedTriggers.at(k).first &gt;= 0) {</div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;                data(idxDigTrig,lDetectedTriggers.at(k).first) = data(idxDigTrig,lDetectedTriggers.at(k).first) + pow(2,counter);</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;            }</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;        counter++;</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;    }</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;}</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div><div class="line"><a name="l00883"></a><span class="lineno"><a class="line" href="a05447.html#afb54b3eb1e92864c797dadc415696ef2">  883</a></span>&#160;MatrixXd <a class="code" href="a05447.html#afb54b3eb1e92864c797dadc415696ef2">BabyMEG::calibrate</a>(<span class="keyword">const</span> MatrixXf&amp; data)</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;{</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;    MatrixXd one;</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a> &amp;&amp; <a class="code" href="a05447.html#a1f86611b63ba74601f22ae14630e9394">m_sparseMatCals</a>.cols() == <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;nchan) {</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;        one = <a class="code" href="a05447.html#a1f86611b63ba74601f22ae14630e9394">m_sparseMatCals</a>*data.cast&lt;<span class="keywordtype">double</span>&gt;();</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;        one = data.cast&lt;<span class="keywordtype">double</span>&gt;();</div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;    }</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;    <span class="keywordflow">return</span> one;</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;}</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;</div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;</div><div class="line"><a name="l00898"></a><span class="lineno"><a class="line" href="a05447.html#a250ab5d9748f2991319dc0a26c4c7c47">  898</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05447.html#a250ab5d9748f2991319dc0a26c4c7c47">BabyMEG::readProjectors</a>()</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;{</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;    QFile t_projFiffFile(<a class="code" href="a05447.html#a3549eb7137cdd22fd2fdaa24297d8857">m_sFiffProjections</a>);</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <span class="comment">//   Open the file</span></div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;    <a class="code" href="a03955.html#afc5bb6ae857cf5e93e4e0271bf0bee05">FiffStream::SPtr</a> t_pStream(<span class="keyword">new</span> <a class="code" href="a03955.html">FiffStream</a>(&amp;t_projFiffFile));</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;    QString t_sFileName = t_pStream-&gt;streamName();</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;    printf(<span class="stringliteral">&quot;Opening header data %s...\n&quot;</span>,t_sFileName.toUtf8().constData());</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordflow">if</span>(!t_pStream-&gt;open()) {</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;    }</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;</div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;    QList&lt;FiffProj&gt; q_ListProj = t_pStream-&gt;read_proj(t_pStream-&gt;dirtree());</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;    <span class="comment">//Set all projectors to zero</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;    <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 0; i&lt;q_ListProj.size(); i++)</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;        q_ListProj[i].active = <span class="keyword">false</span>;</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;    <span class="keywordflow">if</span> (q_ListProj.size() == 0) {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;        printf(<span class="stringliteral">&quot;Could not find projectors\n&quot;</span>);</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;    }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;    <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;projs = q_ListProj;</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    <span class="comment">//garbage collecting</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;    t_pStream-&gt;close();</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;}</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno"><a class="line" href="a05447.html#a8d83e282b962a897aabee2d67561443c">  936</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05447.html#a8d83e282b962a897aabee2d67561443c">BabyMEG::readCompensators</a>()</div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;{</div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;    QFile t_compFiffFile(<a class="code" href="a05447.html#aeb589252db7f1a746fc1ef88f6b5fee8">m_sFiffCompensators</a>);</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;    <span class="comment">//   Open the file</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;    <a class="code" href="a03955.html#afc5bb6ae857cf5e93e4e0271bf0bee05">FiffStream::SPtr</a> t_pStream(<span class="keyword">new</span> <a class="code" href="a03955.html">FiffStream</a>(&amp;t_compFiffFile));</div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    QString t_sFileName = t_pStream-&gt;streamName();</div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;    printf(<span class="stringliteral">&quot;Opening compensator data %s...\n&quot;</span>,t_sFileName.toUtf8().constData());</div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;    <span class="keywordflow">if</span>(!t_pStream-&gt;open()) {</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    }</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;    QList&lt;FiffCtfComp&gt; q_ListComp = t_pStream-&gt;read_ctf_comp(t_pStream-&gt;dirtree(), <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;chs);</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;    <span class="keywordflow">if</span> (q_ListComp.size() == 0) {</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;        printf(<span class="stringliteral">&quot;Could not find compensators\n&quot;</span>);</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;    }</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;comps = q_ListComp;</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">//garbage collecting</span></div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;    t_pStream-&gt;close();</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;}</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;</div><div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="a05447.html#ae3d929b939f9f5581b3e4b4550da6fd6">  970</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a05447.html#ae3d929b939f9f5581b3e4b4550da6fd6">BabyMEG::readBadChannels</a>()</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;{</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    <span class="comment">// Bad Channels</span></div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;<span class="comment">//    //Read bad channels from header/projection fif</span></div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;<span class="comment">//    QFile t_headerFiffFile(m_sFiffProjections);</span></div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;<span class="comment">//    if(!t_headerFiffFile.exists()) {</span></div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;<span class="comment">//        printf(&quot;Could not open fif file for copying bad channels to babyMEG fiff_info\n&quot;);</span></div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;<span class="comment">//        return false;</span></div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;<span class="comment">//    }</span></div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;</div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="comment">//    FiffRawData raw(t_headerFiffFile);</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;<span class="comment">//    m_pFiffInfo-&gt;bads = raw.info.bads;</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;<span class="comment">//    t_headerFiffFile.close();</span></div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;<span class="comment">//    return true;</span></div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">//Read bad channels from</span></div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    QFile t_badChannelsFile(<a class="code" href="a05447.html#ac3c966a849c21fd652685014a712647c">m_sBadChannels</a>);</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="keywordflow">if</span> (!t_badChannelsFile.open(QIODevice::ReadOnly | QIODevice::Text))</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    printf(<span class="stringliteral">&quot;Reading bad channels from %s...\n&quot;</span>, <a class="code" href="a05447.html#ac3c966a849c21fd652685014a712647c">m_sBadChannels</a>.toUtf8().constData());</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;    QTextStream in(&amp;t_badChannelsFile);</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    qint32 count = 0;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    QStringList t_sListbads;</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;    <span class="keywordflow">while</span> (!in.atEnd()) {</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        QString channel = in.readLine();</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="keywordflow">if</span>(channel.isEmpty())</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;            <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        ++count;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;        printf(<span class="stringliteral">&quot;Channel %i: %s\n&quot;</span>,count,channel.toUtf8().constData());</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;        t_sListbads &lt;&lt; channel;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    }</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <a class="code" href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">m_pFiffInfo</a>-&gt;bads = t_sListbads;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;}</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;</div><div class="line"><a name="l01018"></a><span class="lineno"><a class="line" href="a05447.html#a359f6d03d6c339785515ba84c39cec30"> 1018</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#a359f6d03d6c339785515ba84c39cec30">BabyMEG::changeRecordingButton</a>()</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;{</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;    <span class="keywordflow">if</span>(<a class="code" href="a05447.html#a11d31facf214d7e6e697617a4c8b3c5e">m_iBlinkStatus</a> == 0) {</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;        <a class="code" href="a05447.html#aae8328637bd51c976a42e35cf4e17336">m_pActionRecordFile</a>-&gt;setIcon(QIcon(<span class="stringliteral">&quot;:/images/record.png&quot;</span>));</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;        <a class="code" href="a05447.html#a11d31facf214d7e6e697617a4c8b3c5e">m_iBlinkStatus</a> = 1;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;    } <span class="keywordflow">else</span> {</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;        <a class="code" href="a05447.html#aae8328637bd51c976a42e35cf4e17336">m_pActionRecordFile</a>-&gt;setIcon(QIcon(<span class="stringliteral">&quot;:/images/record_active.png&quot;</span>));</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;        <a class="code" href="a05447.html#a11d31facf214d7e6e697617a4c8b3c5e">m_iBlinkStatus</a> = 0;</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;    }</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;}</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;<span class="comment">//*************************************************************************************************************</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"><a class="line" href="a05447.html#ac19d06c7a4a77de71d4f07727c7c1893"> 1032</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a05447.html#ac19d06c7a4a77de71d4f07727c7c1893">BabyMEG::onRecordingRemainingTimeChange</a>()</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;{</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;    <a class="code" href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">m_pProjectSettingsView</a>-&gt;setRecordingElapsedTime(<a class="code" href="a05447.html#abf87304596d7eb4355caf0ec3a452357">m_recordingStartedTime</a>.elapsed());</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;}</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;</div><div class="ttc" id="a05447_html_aef6ee09fc3f2ffc4f6c40f97bcdea6d0"><div class="ttname"><a href="a05447.html#aef6ee09fc3f2ffc4f6c40f97bcdea6d0">BABYMEGPLUGIN::BabyMEG::m_iSplitCount</a></div><div class="ttdeci">qint32 m_iSplitCount</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00414">babymeg.h:414</a></div></div>
<div class="ttc" id="a05447_html_aaf3981a2a7e178a827f18d7bb73f6520"><div class="ttname"><a href="a05447.html#aaf3981a2a7e178a827f18d7bb73f6520">BABYMEGPLUGIN::BabyMEG::getName</a></div><div class="ttdeci">virtual QString getName() const</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00325">babymeg.cpp:325</a></div></div>
<div class="ttc" id="a05447_html_a1e9a69f1f248afef8887453cce354ee2"><div class="ttname"><a href="a05447.html#a1e9a69f1f248afef8887453cce354ee2">BABYMEGPLUGIN::BabyMEG::fiffInfoAvailable</a></div><div class="ttdeci">void fiffInfoAvailable()</div></div>
<div class="ttc" id="a05447_html_a504488fab83e1d298305f858dbbc9421"><div class="ttname"><a href="a05447.html#a504488fab83e1d298305f858dbbc9421">BABYMEGPLUGIN::BabyMEG::m_bDoContinousHPI</a></div><div class="ttdeci">bool m_bDoContinousHPI</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00420">babymeg.h:420</a></div></div>
<div class="ttc" id="a05447_html_ae3d929b939f9f5581b3e4b4550da6fd6"><div class="ttname"><a href="a05447.html#ae3d929b939f9f5581b3e4b4550da6fd6">BABYMEGPLUGIN::BabyMEG::readBadChannels</a></div><div class="ttdeci">bool readBadChannels()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00970">babymeg.cpp:970</a></div></div>
<div class="ttc" id="a05447_html_a142c274c27cdc64f9f44ff71e6961c5a"><div class="ttname"><a href="a05447.html#a142c274c27cdc64f9f44ff71e6961c5a">BABYMEGPLUGIN::BabyMEG::m_iRecordingMSeconds</a></div><div class="ttdeci">int m_iRecordingMSeconds</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00415">babymeg.h:415</a></div></div>
<div class="ttc" id="a05447_html_a2cfd0e68df94405a5196918e2dcd34ab"><div class="ttname"><a href="a05447.html#a2cfd0e68df94405a5196918e2dcd34ab">BABYMEGPLUGIN::BabyMEG::m_pSQUIDCtrlDlg</a></div><div class="ttdeci">QSharedPointer&lt; BabyMEGSQUIDControlDgl &gt; m_pSQUIDCtrlDlg</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00400">babymeg.h:400</a></div></div>
<div class="ttc" id="a05447_html_aae8328637bd51c976a42e35cf4e17336"><div class="ttname"><a href="a05447.html#aae8328637bd51c976a42e35cf4e17336">BABYMEGPLUGIN::BabyMEG::m_pActionRecordFile</a></div><div class="ttdeci">QPointer&lt; QAction &gt; m_pActionRecordFile</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00434">babymeg.h:434</a></div></div>
<div class="ttc" id="a05447_html_a069b5c2de4a048cbac1e66474b00eae2"><div class="ttname"><a href="a05447.html#a069b5c2de4a048cbac1e66474b00eae2">BABYMEGPLUGIN::BabyMEG::setupWidget</a></div><div class="ttdeci">virtual QWidget * setupWidget()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00333">babymeg.cpp:333</a></div></div>
<div class="ttc" id="a05447_html_a0a4987732b9026a1561ed578cf2eeba1"><div class="ttname"><a href="a05447.html#a0a4987732b9026a1561ed578cf2eeba1">BABYMEGPLUGIN::BabyMEG::m_pHPIWidget</a></div><div class="ttdeci">QSharedPointer&lt; DISP3DLIB::HpiView &gt; m_pHPIWidget</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00401">babymeg.h:401</a></div></div>
<div class="ttc" id="a05447_html_a5721181e9693efa67c485afe040df9f7"><div class="ttname"><a href="a05447.html#a5721181e9693efa67c485afe040df9f7">BABYMEGPLUGIN::BabyMEG::m_pMyClientComm</a></div><div class="ttdeci">QSharedPointer&lt; BabyMEGClient &gt; m_pMyClientComm</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00397">babymeg.h:397</a></div></div>
<div class="ttc" id="a00893_html_a03bc7495a53759399050c03521bebccd"><div class="ttname"><a href="a00893.html#a03bc7495a53759399050c03521bebccd">FIFFB_REF</a></div><div class="ttdeci">#define FIFFB_REF</div><div class="ttdef"><b>Definition:</b> <a href="a00893_source.html#l00384">fiff_file.h:384</a></div></div>
<div class="ttc" id="a05447_html_a2b7a704380b2128d2dde3d9b68393f6a"><div class="ttname"><a href="a05447.html#a2b7a704380b2128d2dde3d9b68393f6a">BABYMEGPLUGIN::BabyMEG::sendCMDDataToSQUIDControl</a></div><div class="ttdeci">void sendCMDDataToSQUIDControl(QByteArray DATA)</div></div>
<div class="ttc" id="a05447_html_a2b28209aa966e9470b2eade3bfe8c692"><div class="ttname"><a href="a05447.html#a2b28209aa966e9470b2eade3bfe8c692">BABYMEGPLUGIN::BabyMEG::m_pActionComputeHPI</a></div><div class="ttdeci">QPointer&lt; QAction &gt; m_pActionComputeHPI</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00437">babymeg.h:437</a></div></div>
<div class="ttc" id="a05447_html_ae3682db2e944a4f4320c8960fb49ca27"><div class="ttname"><a href="a05447.html#ae3682db2e944a4f4320c8960fb49ca27">BABYMEGPLUGIN::BabyMEG::setCMDData</a></div><div class="ttdeci">void setCMDData(QByteArray DATA)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00507">babymeg.cpp:507</a></div></div>
<div class="ttc" id="a05479_html"><div class="ttname"><a href="a05479.html">BABYMEGPLUGIN::BabyMEGSQUIDControlDgl</a></div><div class="ttdoc">The BabyMEGSQUIDControlDgl class provides the SQUID control dialog. </div><div class="ttdef"><b>Definition:</b> <a href="a02423_source.html#l00177">babymegsquidcontroldgl.h:177</a></div></div>
<div class="ttc" id="a05447_html_a0c10d24200885af83903b759d455b399"><div class="ttname"><a href="a05447.html#a0c10d24200885af83903b759d455b399">BABYMEGPLUGIN::BabyMEG::createDigTrig</a></div><div class="ttdeci">void createDigTrig(Eigen::MatrixXf &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00848">babymeg.cpp:848</a></div></div>
<div class="ttc" id="a05447_html_a8d500154de09d39aa899806c49f84281"><div class="ttname"><a href="a05447.html#a8d500154de09d39aa899806c49f84281">BABYMEGPLUGIN::BabyMEG::m_sRecordFile</a></div><div class="ttdeci">QString m_sRecordFile</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00421">babymeg.h:421</a></div></div>
<div class="ttc" id="a05447_html_a95379691d236353966f711728dd36562"><div class="ttname"><a href="a05447.html#a95379691d236353966f711728dd36562">BABYMEGPLUGIN::BabyMEG::updateHPI</a></div><div class="ttdeci">void updateHPI(const Eigen::MatrixXf &amp;matData)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00604">babymeg.cpp:604</a></div></div>
<div class="ttc" id="a03955_html_afc5bb6ae857cf5e93e4e0271bf0bee05"><div class="ttname"><a href="a03955.html#afc5bb6ae857cf5e93e4e0271bf0bee05">FIFFLIB::FiffStream::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; FiffStream &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a00950_source.html#l00126">fiff_stream.h:126</a></div></div>
<div class="ttc" id="a05447_html_a8867bb86e726ec6f1cf4ff12c08084f8"><div class="ttname"><a href="a05447.html#a8867bb86e726ec6f1cf4ff12c08084f8">BABYMEGPLUGIN::BabyMEG::setRecordingTimerChanged</a></div><div class="ttdeci">void setRecordingTimerChanged(int timeMSecs)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00667">babymeg.cpp:667</a></div></div>
<div class="ttc" id="a05447_html_aba1217dca495868c5c63cbba248fef55"><div class="ttname"><a href="a05447.html#aba1217dca495868c5c63cbba248fef55">BABYMEGPLUGIN::BabyMEG::m_pBlinkingRecordButtonTimer</a></div><div class="ttdeci">QSharedPointer&lt; QTimer &gt; m_pBlinkingRecordButtonTimer</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00404">babymeg.h:404</a></div></div>
<div class="ttc" id="a05455_html"><div class="ttname"><a href="a05455.html">BABYMEGPLUGIN::BabyMEGInfo</a></div><div class="ttdoc">The BabyMEGClient class provides a TCP/IP communication between Qt and Labview. </div><div class="ttdef"><b>Definition:</b> <a href="a02405_source.html#l00099">babymeginfo.h:99</a></div></div>
<div class="ttc" id="a02219_html"><div class="ttname"><a href="a02219.html">realtimemultisamplearray.h</a></div><div class="ttdoc">Contains the declaration of the RealTimeMultiSampleArray class. </div></div>
<div class="ttc" id="a05447_html_a9eca162405d474c67f9aaf9366a853e1"><div class="ttname"><a href="a05447.html#a9eca162405d474c67f9aaf9366a853e1">BABYMEGPLUGIN::BabyMEG::comFLL</a></div><div class="ttdeci">void comFLL(QString t_sFLLControlCommand)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00551">babymeg.cpp:551</a></div></div>
<div class="ttc" id="a05447_html_a97f765c5ef4cb7564f68a634a22e0075"><div class="ttname"><a href="a05447.html#a97f765c5ef4cb7564f68a634a22e0075">BABYMEGPLUGIN::BabyMEG::initConnector</a></div><div class="ttdeci">void initConnector()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00398">babymeg.cpp:398</a></div></div>
<div class="ttc" id="a05447_html_a9d848a6d26692efd6af31ed2b0276d01"><div class="ttname"><a href="a05447.html#a9d848a6d26692efd6af31ed2b0276d01">BABYMEGPLUGIN::BabyMEG::run</a></div><div class="ttdeci">virtual void run()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00346">babymeg.cpp:346</a></div></div>
<div class="ttc" id="a04783_html_a8cf538a5e32c7a7173a7e78229d297aa"><div class="ttname"><a href="a04783.html#a8cf538a5e32c7a7173a7e78229d297aa">IOBUFFER::CircularMatrixBuffer::SPtr</a></div><div class="ttdeci">QSharedPointer&lt; CircularMatrixBuffer &gt; SPtr</div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00103">circularmatrixbuffer.h:103</a></div></div>
<div class="ttc" id="a00959_html"><div class="ttname"><a href="a00959.html">fiff_types.h</a></div><div class="ttdoc">Definitions for describing the objects in a FIFF file. </div></div>
<div class="ttc" id="a05447_html_a3549eb7137cdd22fd2fdaa24297d8857"><div class="ttname"><a href="a05447.html#a3549eb7137cdd22fd2fdaa24297d8857">BABYMEGPLUGIN::BabyMEG::m_sFiffProjections</a></div><div class="ttdeci">QString m_sFiffProjections</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00422">babymeg.h:422</a></div></div>
<div class="ttc" id="a05447_html_afd00c943e8963c81ffc76d75ea024566"><div class="ttname"><a href="a05447.html#afd00c943e8963c81ffc76d75ea024566">BABYMEGPLUGIN::BabyMEG::setFiffInfo</a></div><div class="ttdeci">void setFiffInfo(const FIFFLIB::FiffInfo &amp;p_FiffInfo)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00429">babymeg.cpp:429</a></div></div>
<div class="ttc" id="a05447_html_abbb28d27f5a827890765dd0db5b50e9e"><div class="ttname"><a href="a05447.html#abbb28d27f5a827890765dd0db5b50e9e">BABYMEGPLUGIN::BabyMEG::setFiffGainInfo</a></div><div class="ttdeci">void setFiffGainInfo(QStringList GainInfo)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00518">babymeg.cpp:518</a></div></div>
<div class="ttc" id="a05447_html_ac3c966a849c21fd652685014a712647c"><div class="ttname"><a href="a05447.html#ac3c966a849c21fd652685014a712647c">BABYMEGPLUGIN::BabyMEG::m_sBadChannels</a></div><div class="ttdeci">QString m_sBadChannels</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00424">babymeg.h:424</a></div></div>
<div class="ttc" id="a05447_html_aeb589252db7f1a746fc1ef88f6b5fee8"><div class="ttname"><a href="a05447.html#aeb589252db7f1a746fc1ef88f6b5fee8">BABYMEGPLUGIN::BabyMEG::m_sFiffCompensators</a></div><div class="ttdeci">QString m_sFiffCompensators</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00423">babymeg.h:423</a></div></div>
<div class="ttc" id="a05447_html_afb54b3eb1e92864c797dadc415696ef2"><div class="ttname"><a href="a05447.html#afb54b3eb1e92864c797dadc415696ef2">BABYMEGPLUGIN::BabyMEG::calibrate</a></div><div class="ttdeci">Eigen::MatrixXd calibrate(const Eigen::MatrixXf &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00883">babymeg.cpp:883</a></div></div>
<div class="ttc" id="a05463_html"><div class="ttname"><a href="a05463.html">BABYMEGPLUGIN::BabyMEGSetupWidget</a></div><div class="ttdoc">The BabyMEGSetupWidget class provides a setup widget for the BabyMEG. </div><div class="ttdef"><b>Definition:</b> <a href="a02417_source.html#l00092">babymegsetupwidget.h:92</a></div></div>
<div class="ttc" id="a05447_html_a47eba658e206a44e8a2a30cb324cb7ff"><div class="ttname"><a href="a05447.html#a47eba658e206a44e8a2a30cb324cb7ff">BABYMEGPLUGIN::BabyMEG::m_pUpdateTimeInfoTimer</a></div><div class="ttdeci">QSharedPointer&lt; QTimer &gt; m_pUpdateTimeInfoTimer</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00403">babymeg.h:403</a></div></div>
<div class="ttc" id="a05447_html_ab0224f3005c95a8c49bf765f8a9c14e8"><div class="ttname"><a href="a05447.html#ab0224f3005c95a8c49bf765f8a9c14e8">BABYMEGPLUGIN::BabyMEG::showSqdCtrlDialog</a></div><div class="ttdeci">void showSqdCtrlDialog()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00705">babymeg.cpp:705</a></div></div>
<div class="ttc" id="a05351_html_addfb10f54b9f7aaed5a12ad5665d8b5da86f46a40444d051a5b7ace338f27dedd"><div class="ttname"><a href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5da86f46a40444d051a5b7ace338f27dedd">SCSHAREDLIB::IPlugin::_ISensor</a></div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00102">IPlugin.h:102</a></div></div>
<div class="ttc" id="a05447_html_a76e2459d79515db87af40aee2b07c023"><div class="ttname"><a href="a05447.html#a76e2459d79515db87af40aee2b07c023">BABYMEGPLUGIN::BabyMEG::m_pRTMSABabyMEG</a></div><div class="ttdeci">SCSHAREDLIB::PluginOutputData&lt; SCMEASLIB::RealTimeMultiSampleArray &gt;::SPtr m_pRTMSABabyMEG</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00392">babymeg.h:392</a></div></div>
<div class="ttc" id="a05447_html_a11d31facf214d7e6e697617a4c8b3c5e"><div class="ttname"><a href="a05447.html#a11d31facf214d7e6e697617a4c8b3c5e">BABYMEGPLUGIN::BabyMEG::m_iBlinkStatus</a></div><div class="ttdeci">qint16 m_iBlinkStatus</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00412">babymeg.h:412</a></div></div>
<div class="ttc" id="a03164_html"><div class="ttname"><a href="a03164.html">DISPLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a00173_source.html#l00079">bar.h:79</a></div></div>
<div class="ttc" id="a05447_html_ad16e6b4a19f6b089ab3d95cf0c20eb48"><div class="ttname"><a href="a05447.html#ad16e6b4a19f6b089ab3d95cf0c20eb48">BABYMEGPLUGIN::BabyMEG::stop</a></div><div class="ttdeci">virtual bool stop()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00294">babymeg.cpp:294</a></div></div>
<div class="ttc" id="a05447_html_a78cd278facdd5bc02e3ed46952e413bc"><div class="ttname"><a href="a05447.html#a78cd278facdd5bc02e3ed46952e413bc">BABYMEGPLUGIN::BabyMEG::m_bUseRecordTimer</a></div><div class="ttdeci">bool m_bUseRecordTimer</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00418">babymeg.h:418</a></div></div>
<div class="ttc" id="a05447_html_ac19d06c7a4a77de71d4f07727c7c1893"><div class="ttname"><a href="a05447.html#ac19d06c7a4a77de71d4f07727c7c1893">BABYMEGPLUGIN::BabyMEG::onRecordingRemainingTimeChange</a></div><div class="ttdeci">void onRecordingRemainingTimeChange()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l01032">babymeg.cpp:1032</a></div></div>
<div class="ttc" id="a05447_html_ad1c8d3cf383f7b9f26e6fb231879d1c1"><div class="ttname"><a href="a05447.html#ad1c8d3cf383f7b9f26e6fb231879d1c1">BABYMEGPLUGIN::BabyMEG::clone</a></div><div class="ttdeci">virtual QSharedPointer&lt; SCSHAREDLIB::IPlugin &gt; clone() const</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00180">babymeg.cpp:180</a></div></div>
<div class="ttc" id="a03167_html"><div class="ttname"><a href="a03167.html">UTILSLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a00317_source.html#l00078">filtersettingsview.h:78</a></div></div>
<div class="ttc" id="a05447_html_a879e3426e3880df6c07dc8dbbb4f157d"><div class="ttname"><a href="a05447.html#a879e3426e3880df6c07dc8dbbb4f157d">BABYMEGPLUGIN::BabyMEG::m_iBufferSize</a></div><div class="ttdeci">qint32 m_iBufferSize</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00413">babymeg.h:413</a></div></div>
<div class="ttc" id="a05447_html_a8a83a5508a98b7ca7d39f1840b743551"><div class="ttname"><a href="a05447.html#a8a83a5508a98b7ca7d39f1840b743551">BABYMEGPLUGIN::BabyMEG::m_qFileOut</a></div><div class="ttdeci">QFile m_qFileOut</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00426">babymeg.h:426</a></div></div>
<div class="ttc" id="a05447_html_adb3d66cbcd312fc47e5dc9cfc89f8f48"><div class="ttname"><a href="a05447.html#adb3d66cbcd312fc47e5dc9cfc89f8f48">BABYMEGPLUGIN::BabyMEG::clear</a></div><div class="ttdeci">void clear()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00262">babymeg.cpp:262</a></div></div>
<div class="ttc" id="a02423_html"><div class="ttname"><a href="a02423.html">babymegsquidcontroldgl.h</a></div><div class="ttdoc">BabyMEGSQUIDControlDGL class declaration. </div></div>
<div class="ttc" id="a03955_html"><div class="ttname"><a href="a03955.html">FIFFLIB::FiffStream</a></div><div class="ttdoc">FIFF File I/O routines. </div><div class="ttdef"><b>Definition:</b> <a href="a00950_source.html#l00123">fiff_stream.h:123</a></div></div>
<div class="ttc" id="a05447_html_abb09ad36301c82157e67d20e68b583ff"><div class="ttname"><a href="a05447.html#abb09ad36301c82157e67d20e68b583ff">BABYMEGPLUGIN::BabyMEG::m_pActionUpdateFiffInfo</a></div><div class="ttdeci">QPointer&lt; QAction &gt; m_pActionUpdateFiffInfo</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00436">babymeg.h:436</a></div></div>
<div class="ttc" id="a03170_html"><div class="ttname"><a href="a03170.html">DISP3DLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a00482_source.html#l00076">data3Dtreedelegate.h:76</a></div></div>
<div class="ttc" id="a05447_html_aad52ea2850b45ea866a3f2ad902abe8d"><div class="ttname"><a href="a05447.html#aad52ea2850b45ea866a3f2ad902abe8d">BABYMEGPLUGIN::BabyMEG::splitRecordingFile</a></div><div class="ttdeci">void splitRecordingFile()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00722">babymeg.cpp:722</a></div></div>
<div class="ttc" id="a00863_html"><div class="ttname"><a href="a00863.html">fiff_dig_point_set.h</a></div><div class="ttdoc">FiffDigPointSet class declaration. </div></div>
<div class="ttc" id="a05447_html_a1dcbeac2b831f3c7ed2f775d7908949b"><div class="ttname"><a href="a05447.html#a1dcbeac2b831f3c7ed2f775d7908949b">BABYMEGPLUGIN::BabyMEG::setFileName</a></div><div class="ttdeci">void setFileName(const QString &amp;sFileName)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00687">babymeg.cpp:687</a></div></div>
<div class="ttc" id="a00014_html"><div class="ttname"><a href="a00014.html">rtcmdclient.h</a></div><div class="ttdoc">declaration of the RtCmdClient Class. </div></div>
<div class="ttc" id="a05447_html_a4ed4281b03ca6228f44c25dcb9082567"><div class="ttname"><a href="a05447.html#a4ed4281b03ca6228f44c25dcb9082567">BABYMEGPLUGIN::BabyMEG::m_pInfo</a></div><div class="ttdeci">QSharedPointer&lt; BabyMEGInfo &gt; m_pInfo</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00398">babymeg.h:398</a></div></div>
<div class="ttc" id="a05447_html_aa78e13324f63c3129d4805b06afab260"><div class="ttname"><a href="a05447.html#aa78e13324f63c3129d4805b06afab260">BABYMEGPLUGIN::BabyMEG::m_pRawMatrixBuffer</a></div><div class="ttdeci">QSharedPointer&lt; IOBUFFER::RawMatrixBuffer &gt; m_pRawMatrixBuffer</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00394">babymeg.h:394</a></div></div>
<div class="ttc" id="a05447_html_a723a34685ce23e8e2986f66ee9d1b556"><div class="ttname"><a href="a05447.html#a723a34685ce23e8e2986f66ee9d1b556">BABYMEGPLUGIN::BabyMEG::m_pProjectSettingsView</a></div><div class="ttdeci">QSharedPointer&lt; DISPLIB::ProjectSettingsView &gt; m_pProjectSettingsView</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00399">babymeg.h:399</a></div></div>
<div class="ttc" id="a05447_html_a9b624fc2083d63222838b6b4765ead3f"><div class="ttname"><a href="a05447.html#a9b624fc2083d63222838b6b4765ead3f">BABYMEGPLUGIN::BabyMEG::m_bWriteToFile</a></div><div class="ttdeci">bool m_bWriteToFile</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00417">babymeg.h:417</a></div></div>
<div class="ttc" id="a02399_html"><div class="ttname"><a href="a02399.html">babymegclient.h</a></div><div class="ttdoc">BabyMEGClient class declaration. </div></div>
<div class="ttc" id="a05351_html_addfb10f54b9f7aaed5a12ad5665d8b5d"><div class="ttname"><a href="a05351.html#addfb10f54b9f7aaed5a12ad5665d8b5d">SCSHAREDLIB::IPlugin::PluginType</a></div><div class="ttdeci">PluginType</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00100">IPlugin.h:100</a></div></div>
<div class="ttc" id="a05447_html_a9db1ea03fefc693158d32ef423ca7f1b"><div class="ttname"><a href="a05447.html#a9db1ea03fefc693158d32ef423ca7f1b">BABYMEGPLUGIN::BabyMEG::m_pActionSqdCtrl</a></div><div class="ttdeci">QPointer&lt; QAction &gt; m_pActionSqdCtrl</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00435">babymeg.h:435</a></div></div>
<div class="ttc" id="a05447_html_abf87304596d7eb4355caf0ec3a452357"><div class="ttname"><a href="a05447.html#abf87304596d7eb4355caf0ec3a452357">BABYMEGPLUGIN::BabyMEG::m_recordingStartedTime</a></div><div class="ttdeci">QTime m_recordingStartedTime</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00428">babymeg.h:428</a></div></div>
<div class="ttc" id="a05447_html_a72e4651b25bd44df78c7b2b9e8d7aecd"><div class="ttname"><a href="a05447.html#a72e4651b25bd44df78c7b2b9e8d7aecd">BABYMEGPLUGIN::BabyMEG::updateFiffInfo</a></div><div class="ttdeci">void updateFiffInfo()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00566">babymeg.cpp:566</a></div></div>
<div class="ttc" id="a05447_html_a3d8337303d19780536f6a60e0d1509c6"><div class="ttname"><a href="a05447.html#a3d8337303d19780536f6a60e0d1509c6">BABYMEGPLUGIN::BabyMEG::onContinousHPIToggled</a></div><div class="ttdeci">void onContinousHPIToggled(bool bDoContinousHPI)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00659">babymeg.cpp:659</a></div></div>
<div class="ttc" id="a05447_html_a3e4f412556e3bcb0f1573126277803eb"><div class="ttname"><a href="a05447.html#a3e4f412556e3bcb0f1573126277803eb">BABYMEGPLUGIN::BabyMEG::init</a></div><div class="ttdeci">virtual void init()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00189">babymeg.cpp:189</a></div></div>
<div class="ttc" id="a05447_html_a15bd8d799c3165958facee58554722b8"><div class="ttname"><a href="a05447.html#a15bd8d799c3165958facee58554722b8">BABYMEGPLUGIN::BabyMEG::setFiffData</a></div><div class="ttdeci">void setFiffData(QByteArray DATA)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00476">babymeg.cpp:476</a></div></div>
<div class="ttc" id="a05447_html_a90fc395f7870cae8cc795fba72927188"><div class="ttname"><a href="a05447.html#a90fc395f7870cae8cc795fba72927188">BABYMEGPLUGIN::BabyMEG::dataToSquidCtrlGUI</a></div><div class="ttdeci">void dataToSquidCtrlGUI(Eigen::MatrixXf tmp)</div></div>
<div class="ttc" id="a05447_html_a1f86611b63ba74601f22ae14630e9394"><div class="ttname"><a href="a05447.html#a1f86611b63ba74601f22ae14630e9394">BABYMEGPLUGIN::BabyMEG::m_sparseMatCals</a></div><div class="ttdeci">Eigen::SparseMatrix&lt; double &gt; m_sparseMatCals</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00431">babymeg.h:431</a></div></div>
<div class="ttc" id="a02390_html"><div class="ttname"><a href="a02390.html">babymeg.h</a></div><div class="ttdoc">BabyMEG class declaration. </div></div>
<div class="ttc" id="a03183_html"><div class="ttname"><a href="a03183.html">IOBUFFER</a></div><div class="ttdef"><b>Definition:</b> <a href="a01547_source.html#l00060">buffer.h:60</a></div></div>
<div class="ttc" id="a05447_html_a6ffc6d15fad9d401555f0c7fdcad5b1e"><div class="ttname"><a href="a05447.html#a6ffc6d15fad9d401555f0c7fdcad5b1e">BABYMEGPLUGIN::BabyMEG::unload</a></div><div class="ttdeci">virtual void unload()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00254">babymeg.cpp:254</a></div></div>
<div class="ttc" id="a03783_html"><div class="ttname"><a href="a03783.html">DISP3DLIB::HpiView</a></div><div class="ttdoc">The HpiView class provides a QDialog for the HPI controls. </div><div class="ttdef"><b>Definition:</b> <a href="a00773_source.html#l00110">hpiview.h:110</a></div></div>
<div class="ttc" id="a05447_html_a577fbaa287e78c90caa6a8123f9dddf0"><div class="ttname"><a href="a05447.html#a577fbaa287e78c90caa6a8123f9dddf0">BABYMEGPLUGIN::BabyMEG::toggleRecordingFile</a></div><div class="ttdeci">void toggleRecordingFile()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00759">babymeg.cpp:759</a></div></div>
<div class="ttc" id="a05447_html_ac73656267578a1ed318df983fde18050"><div class="ttname"><a href="a05447.html#ac73656267578a1ed318df983fde18050">BABYMEGPLUGIN::BabyMEG::m_pActionSetupProject</a></div><div class="ttdeci">QPointer&lt; QAction &gt; m_pActionSetupProject</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00433">babymeg.h:433</a></div></div>
<div class="ttc" id="a05447_html_a850b3204e3e736dc4d94a77cabc7a3e9"><div class="ttname"><a href="a05447.html#a850b3204e3e736dc4d94a77cabc7a3e9">BABYMEGPLUGIN::BabyMEG::getType</a></div><div class="ttdeci">virtual SCSHAREDLIB::IPlugin::PluginType getType() const</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00317">babymeg.cpp:317</a></div></div>
<div class="ttc" id="a04783_html"><div class="ttname"><a href="a04783.html">IOBUFFER::CircularMatrixBuffer</a></div><div class="ttdoc">The circular matrix buffer. </div><div class="ttdef"><b>Definition:</b> <a href="a01562_source.html#l00100">circularmatrixbuffer.h:100</a></div></div>
<div class="ttc" id="a03205_html"><div class="ttname"><a href="a03205.html">SCSHAREDLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a02249_source.html#l00060">IAlgorithm.h:60</a></div></div>
<div class="ttc" id="a01583_html"><div class="ttname"><a href="a01583.html">ioutils.h</a></div><div class="ttdoc">IOUtils class declaration. </div></div>
<div class="ttc" id="a05447_html_a250ab5d9748f2991319dc0a26c4c7c47"><div class="ttname"><a href="a05447.html#a250ab5d9748f2991319dc0a26c4c7c47">BABYMEGPLUGIN::BabyMEG::readProjectors</a></div><div class="ttdeci">bool readProjectors()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00898">babymeg.cpp:898</a></div></div>
<div class="ttc" id="a00425_html"><div class="ttname"><a href="a00425.html">projectsettingsview.h</a></div><div class="ttdoc">Declaration of the ProjectSettingsView Class. </div></div>
<div class="ttc" id="a05447_html_a8c1f7c961a824697db226d83b40e4104"><div class="ttname"><a href="a05447.html#a8c1f7c961a824697db226d83b40e4104">BABYMEGPLUGIN::BabyMEG::m_pMyClient</a></div><div class="ttdeci">QSharedPointer&lt; BabyMEGClient &gt; m_pMyClient</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00396">babymeg.h:396</a></div></div>
<div class="ttc" id="a02417_html"><div class="ttname"><a href="a02417.html">babymegsetupwidget.h</a></div><div class="ttdoc">BabyMEGSetupWidget class declaration. </div></div>
<div class="ttc" id="a05447_html_a2b314fd5fc1febef1d437a5b4d4636e6"><div class="ttname"><a href="a05447.html#a2b314fd5fc1febef1d437a5b4d4636e6">BABYMEGPLUGIN::BabyMEG::m_mutex</a></div><div class="ttdeci">QMutex m_mutex</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00427">babymeg.h:427</a></div></div>
<div class="ttc" id="a05451_html"><div class="ttname"><a href="a05451.html">BABYMEGPLUGIN::BabyMEGClient</a></div><div class="ttdoc">The BabyMEGClient class provides a TCP/IP communication between Qt and Labview. </div><div class="ttdef"><b>Definition:</b> <a href="a02399_source.html#l00098">babymegclient.h:98</a></div></div>
<div class="ttc" id="a02405_html"><div class="ttname"><a href="a02405.html">babymeginfo.h</a></div><div class="ttdoc">BabyMEGInfo class declaration. </div></div>
<div class="ttc" id="a05447_html_a615bddd0690c6df04a1d9a54417dc54a"><div class="ttname"><a href="a05447.html#a615bddd0690c6df04a1d9a54417dc54a">BABYMEGPLUGIN::BabyMEG::m_lTriggerChannelIndices</a></div><div class="ttdeci">QList&lt; int &gt; m_lTriggerChannelIndices</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00407">babymeg.h:407</a></div></div>
<div class="ttc" id="a05447_html_a1b7862e223df5e0aec874b03ab12902d"><div class="ttname"><a href="a05447.html#a1b7862e223df5e0aec874b03ab12902d">BABYMEGPLUGIN::BabyMEG::start</a></div><div class="ttdeci">virtual bool start()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00271">babymeg.cpp:271</a></div></div>
<div class="ttc" id="a05447_html_a5d7135514488fbc26d50476ac3cfd14c"><div class="ttname"><a href="a05447.html#a5d7135514488fbc26d50476ac3cfd14c">BABYMEGPLUGIN::BabyMEG::showProjectDialog</a></div><div class="ttdeci">void showProjectDialog()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00695">babymeg.cpp:695</a></div></div>
<div class="ttc" id="a05447_html_a359f6d03d6c339785515ba84c39cec30"><div class="ttname"><a href="a05447.html#a359f6d03d6c339785515ba84c39cec30">BABYMEGPLUGIN::BabyMEG::changeRecordingButton</a></div><div class="ttdeci">void changeRecordingButton()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l01018">babymeg.cpp:1018</a></div></div>
<div class="ttc" id="a05447_html_aab056584dd43354a277a04ebd6652071"><div class="ttname"><a href="a05447.html#aab056584dd43354a277a04ebd6652071">BABYMEGPLUGIN::BabyMEG::BabyMEG</a></div><div class="ttdeci">BabyMEG()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00093">babymeg.cpp:93</a></div></div>
<div class="ttc" id="a05447_html_a778de6e67484264f0aa432d079bbe827"><div class="ttname"><a href="a05447.html#a778de6e67484264f0aa432d079bbe827">BABYMEGPLUGIN::BabyMEG::showHPIDialog</a></div><div class="ttdeci">void showHPIDialog()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00580">babymeg.cpp:580</a></div></div>
<div class="ttc" id="a05447_html_a200a3ad6e330f14259c39a50f9cbd070"><div class="ttname"><a href="a05447.html#a200a3ad6e330f14259c39a50f9cbd070">BABYMEGPLUGIN::BabyMEG::setRecordingTimerStateChanged</a></div><div class="ttdeci">void setRecordingTimerStateChanged(bool state)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00679">babymeg.cpp:679</a></div></div>
<div class="ttc" id="a05447_html_a08f63e92d47412c06dd0609fac74abfa"><div class="ttname"><a href="a05447.html#a08f63e92d47412c06dd0609fac74abfa">BABYMEGPLUGIN::BabyMEG::m_pRecordTimer</a></div><div class="ttdeci">QSharedPointer&lt; QTimer &gt; m_pRecordTimer</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00405">babymeg.h:405</a></div></div>
<div class="ttc" id="a05447_html_a8258f87612d13cd8c2eeea26797033dd"><div class="ttname"><a href="a05447.html#a8258f87612d13cd8c2eeea26797033dd">BABYMEGPLUGIN::BabyMEG::~BabyMEG</a></div><div class="ttdeci">virtual ~BabyMEG()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00165">babymeg.cpp:165</a></div></div>
<div class="ttc" id="a00893_html_a591e66b9fcd3973990a7ce37b5c04874"><div class="ttname"><a href="a00893.html#a591e66b9fcd3973990a7ce37b5c04874">FIFF_FIRST_SAMPLE</a></div><div class="ttdeci">#define FIFF_FIRST_SAMPLE</div><div class="ttdef"><b>Definition:</b> <a href="a00893_source.html#l00465">fiff_file.h:465</a></div></div>
<div class="ttc" id="a01511_html"><div class="ttname"><a href="a01511.html">detecttrigger.h</a></div><div class="ttdoc">DetectTrigger class declaration. </div></div>
<div class="ttc" id="a05447_html_a8d83e282b962a897aabee2d67561443c"><div class="ttname"><a href="a05447.html#a8d83e282b962a897aabee2d67561443c">BABYMEGPLUGIN::BabyMEG::readCompensators</a></div><div class="ttdeci">bool readCompensators()</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00936">babymeg.cpp:936</a></div></div>
<div class="ttc" id="a03208_html"><div class="ttname"><a href="a03208.html">BABYMEGPLUGIN</a></div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00101">babymeg.h:101</a></div></div>
<div class="ttc" id="a05447_html_a0f58bbd21a676a01a78171ff77f26b68"><div class="ttname"><a href="a05447.html#a0f58bbd21a676a01a78171ff77f26b68">BABYMEGPLUGIN::BabyMEG::m_pFiffInfo</a></div><div class="ttdeci">FIFFLIB::FiffInfo::SPtr m_pFiffInfo</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00409">babymeg.h:409</a></div></div>
<div class="ttc" id="a05447_html_af9a5d0b724d9281c73ec86170d7fc55c"><div class="ttname"><a href="a05447.html#af9a5d0b724d9281c73ec86170d7fc55c">BABYMEGPLUGIN::BabyMEG::m_bIsRunning</a></div><div class="ttdeci">bool m_bIsRunning</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00419">babymeg.h:419</a></div></div>
<div class="ttc" id="a05391_html"><div class="ttname"><a href="a05391.html">SCSHAREDLIB::PluginOutputData</a></div><div class="ttdoc">PluginOutputConnector with specified Measurement. </div><div class="ttdef"><b>Definition:</b> <a href="a02312_source.html#l00072">pluginoutputdata.h:72</a></div></div>
<div class="ttc" id="a05447_html_a43ec10e9112180e21d9cc32334750a9c"><div class="ttname"><a href="a05447.html#a43ec10e9112180e21d9cc32334750a9c">BABYMEGPLUGIN::BabyMEG::doContinousHPI</a></div><div class="ttdeci">void doContinousHPI(Eigen::MatrixXf &amp;matData)</div><div class="ttdef"><b>Definition:</b> <a href="a02387_source.html#l00614">babymeg.cpp:614</a></div></div>
<div class="ttc" id="a05351_html_acd0c42811d473bfa88b5f280d3da6ca3"><div class="ttname"><a href="a05351.html#acd0c42811d473bfa88b5f280d3da6ca3">SCSHAREDLIB::IPlugin::addPluginAction</a></div><div class="ttdeci">void addPluginAction(QAction *pAction)</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00249">IPlugin.h:249</a></div></div>
<div class="ttc" id="a05447_html_adad8ea36b49d6fd9dfc9e01009736e7c"><div class="ttname"><a href="a05447.html#adad8ea36b49d6fd9dfc9e01009736e7c">BABYMEGPLUGIN::BabyMEG::m_pOutfid</a></div><div class="ttdeci">FIFFLIB::FiffStream::SPtr m_pOutfid</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00410">babymeg.h:410</a></div></div>
<div class="ttc" id="a05447_html_ae12194cc630a6d7f6e0c9c3efaba9c03"><div class="ttname"><a href="a05447.html#ae12194cc630a6d7f6e0c9c3efaba9c03">BABYMEGPLUGIN::BabyMEG::m_cals</a></div><div class="ttdeci">Eigen::RowVectorXd m_cals</div><div class="ttdef"><b>Definition:</b> <a href="a02390_source.html#l00430">babymeg.h:430</a></div></div>
<div class="ttc" id="a00773_html"><div class="ttname"><a href="a00773.html">hpiview.h</a></div><div class="ttdoc">HpiView class declaration. </div></div>
<div class="ttc" id="a05351_html_a3d20989cd2175fa71bf77ceb0c99f353"><div class="ttname"><a href="a05351.html#a3d20989cd2175fa71bf77ceb0c99f353">SCSHAREDLIB::IPlugin::m_outputConnectors</a></div><div class="ttdeci">OutputConnectorList m_outputConnectors</div><div class="ttdef"><b>Definition:</b> <a href="a02255_source.html#l00222">IPlugin.h:222</a></div></div>
<div class="ttc" id="a05391_html_aceae87f721c31ca112ce126fcd522685"><div class="ttname"><a href="a05391.html#aceae87f721c31ca112ce126fcd522685">SCSHAREDLIB::PluginOutputData::data</a></div><div class="ttdeci">QSharedPointer&lt; T &gt; &amp; data()</div><div class="ttdef"><b>Definition:</b> <a href="a02312_source.html#l00135">pluginoutputdata.h:135</a></div></div>
<div class="ttc" id="a03204_html"><div class="ttname"><a href="a03204.html">SCMEASLIB</a></div><div class="ttdef"><b>Definition:</b> <a href="a02138_source.html#l00078">realtimeconnectivityestimatewidget.h:78</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Dec 18 2019 19:35:42
</small></address>
</body>
</html>